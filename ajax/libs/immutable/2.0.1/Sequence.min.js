function Sequence(e){"use strict";return Sequence.from(1===arguments.length?e:Array.prototype.slice.call(arguments))}function IndexedSequence(){"use strict";null!==Sequence&&Sequence.apply(this,arguments)}function ObjectSequence(e){"use strict";var t=Object.keys(e);this.$ObjectSequence_object=e,this.$ObjectSequence_keys=t,this.length=t.length}function ArraySequence(e){"use strict";this.$ArraySequence_array=e,this.length=e.length}function makeSequence(){return Object.create(Sequence.prototype)}function makeIndexedSequence(e){var t=Object.create(IndexedSequence.prototype);return t.__reversedIndices=e?e.__reversedIndices:!1,t}function getInDeepSequence(e,t,n,r){var u=e.get?e.get(t[r],__SENTINEL):__SENTINEL;return u===__SENTINEL?n:r===t.length-1?u:getInDeepSequence(u,t,n,r+1)}function wholeSlice(e,t,n){return(0===e||null!=n&&-n>=e)&&(null==t||null!=n&&t>=n)}function resolveBegin(e,t){return 0>e?Math.max(0,t+e):t?Math.min(t,e):e}function resolveEnd(e,t){return null==e?t:0>e?Math.max(0,t+e):t?Math.min(t,e):e}function entryMapper(e,t){return[t,e]}function returnTrue(){return!0}function returnThis(){return this}function filterFactory(e,t,n,r,u){var c=e.__makeSequence();return c.__iterateUncached=function(c,i,o){var s=0,a=e.__iterate(function(e,u,i){if(t.call(n,e,u,i)){if(c(e,r?u:s,i)===!1)return!1;s++}},i,o);return u?a:s},c}function not(e){return function(){return!e.apply(this,arguments)}}function quoteString(e){return"string"==typeof e?JSON.stringify(e):e}function repeatString(e,t){for(var n="";t;)1&t&&(n+=e),(t>>=1)&&(e+=e);return n}function assertNotInfinite(e){if(1/0===e)throw new Error("Cannot perform this action with an infinite sequence.")}var Immutable=require("./Immutable");Sequence.from=function(e){"use strict";if(e instanceof Sequence)return e;if(!Array.isArray(e)){if(e&&e.constructor===Object)return new ObjectSequence(e);e=[e]}return new ArraySequence(e)},Sequence.prototype.toString=function(){"use strict";return this.__toString("Seq {","}")},Sequence.prototype.__toString=function(e,t){"use strict";return 0===this.length?e+t:e+" "+this.map(this.__toStringMapper).join(", ")+" "+t},Sequence.prototype.__toStringMapper=function(e,t){"use strict";return t+": "+quoteString(e)},Sequence.prototype.toJSON=function(){"use strict";return this.map(function(e){return e.toJSON?e.toJSON():e}).__toJS()},Sequence.prototype.toArray=function(){"use strict";assertNotInfinite(this.length);var e=new Array(this.length||0);return this.values().forEach(function(t,n){e[n]=t}),e},Sequence.prototype.toObject=function(){"use strict";assertNotInfinite(this.length);var e={};return this.forEach(function(t,n){e[n]=t}),e},Sequence.prototype.toVector=function(){"use strict";return assertNotInfinite(this.length),require("./Vector").from(this)},Sequence.prototype.toMap=function(){"use strict";return assertNotInfinite(this.length),require("./Map").from(this)},Sequence.prototype.toOrderedMap=function(){"use strict";return assertNotInfinite(this.length),require("./OrderedMap").from(this)},Sequence.prototype.toSet=function(){"use strict";return assertNotInfinite(this.length),require("./Set").from(this)},Sequence.prototype.equals=function(e){"use strict";if(this===e)return!0;if(!(e instanceof Sequence))return!1;if(null!=this.length&&null!=e.length){if(this.length!==e.length)return!1;if(0===this.length&&0===e.length)return!0}return this.__deepEquals(e)},Sequence.prototype.__deepEquals=function(e){"use strict";var t=this.cacheResult().entries().toArray(),n=0;return e.every(function(e,r){var u=t[n++];return Immutable.is(r,u[0])&&Immutable.is(e,u[1])})},Sequence.prototype.join=function(e){"use strict";e=e||",";var t="",n=!0;return this.forEach(function(r){n?(n=!1,t+=r):t+=e+r}),t},Sequence.prototype.concat=function(){"use strict";var e=Array.prototype.slice.call(arguments,0),t=[this].concat(e.map(function(e){return Sequence(e)})),n=this.__makeSequence();return n.length=t.reduce(function(e,t){return null!=e&&null!=t.length?e+t.length:void 0},0),n.__iterateUncached=function(e,n){for(var r,u=0,c=t.length-1,i=0;c>=i&&!r;i++){var o=t[n?c-i:i];u+=o.__iterate(function(t,n,u){return e(t,n,u)===!1?(r=!0,!1):void 0},n)}return u},n},Sequence.prototype.reverse=function(){"use strict";var e=this,t=e.__makeSequence();return t.length=e.length,t.__iterateUncached=function(t,n){return e.__iterate(t,!n)},t.reverse=function(){return e},t},Sequence.prototype.keys=function(){"use strict";return this.flip().values()},Sequence.prototype.values=function(){"use strict";var e=this,t=makeIndexedSequence(e);return t.length=e.length,t.values=returnThis,t.__iterateUncached=function(t,n,r){if(r&&null==this.length)return this.cacheResult().__iterate(t,n,r);var u,c=0;return r?(c=this.length-1,u=function(e,n,r){return t(e,c--,r)!==!1}):u=function(e,n,r){return t(e,c++,r)!==!1},e.__iterate(u,n),r?this.length:c},t},Sequence.prototype.entries=function(){"use strict";var e=this;if(e.$Sequence_cache)return Sequence(e.$Sequence_cache);var t=e.map(entryMapper).values();return t.fromEntries=function(){return e},t},Sequence.prototype.forEach=function(e,t){"use strict";return this.__iterate(t?e.bind(t):e)},Sequence.prototype.reduce=function(e,t,n){"use strict";var r=t;return this.forEach(function(t,u,c){r=e.call(n,r,t,u,c)}),r},Sequence.prototype.reduceRight=function(e,t,n){"use strict";return this.reverse(!0).reduce(e,t,n)},Sequence.prototype.every=function(e,t){"use strict";var n=!0;return this.forEach(function(r,u,c){return e.call(t,r,u,c)?void 0:(n=!1,!1)}),n},Sequence.prototype.some=function(e,t){"use strict";return!this.every(not(e),t)},Sequence.prototype.first=function(){"use strict";return this.find(returnTrue)},Sequence.prototype.last=function(){"use strict";return this.findLast(returnTrue)},Sequence.prototype.has=function(e){"use strict";return this.get(e,__SENTINEL)!==__SENTINEL},Sequence.prototype.get=function(e,t){"use strict";return this.find(function(t,n){return Immutable.is(n,e)},null,t)},Sequence.prototype.getIn=function(e,t){"use strict";return getInDeepSequence(this,e,t,0)},Sequence.prototype.contains=function(e){"use strict";return this.find(function(t){return Immutable.is(t,e)},null,__SENTINEL)!==__SENTINEL},Sequence.prototype.find=function(e,t,n){"use strict";var r=n;return this.forEach(function(n,u,c){return e.call(t,n,u,c)?(r=n,!1):void 0}),r},Sequence.prototype.findKey=function(e,t){"use strict";var n;return this.forEach(function(r,u,c){return e.call(t,r,u,c)?(n=u,!1):void 0}),n},Sequence.prototype.findLast=function(e,t,n){"use strict";return this.reverse(!0).find(e,t,n)},Sequence.prototype.findLastKey=function(e,t){"use strict";return this.reverse(!0).findKey(e,t)},Sequence.prototype.flip=function(){"use strict";var e=this,t=makeSequence();return t.length=e.length,t.flip=function(){return e},t.__iterateUncached=function(t,n){return e.__iterate(function(e,n,r){return t(n,e,r)!==!1},n)},t},Sequence.prototype.map=function(e,t){"use strict";var n=this,r=n.__makeSequence();return r.length=n.length,r.__iterateUncached=function(r,u){return n.__iterate(function(n,u,c){return r(e.call(t,n,u,c),u,c)!==!1},u)},r},Sequence.prototype.filter=function(e,t){"use strict";return filterFactory(this,e,t,!0,!1)},Sequence.prototype.slice=function(e,t){"use strict";if(wholeSlice(e,t,this.length))return this;var n=resolveBegin(e,this.length),r=resolveEnd(t,this.length);if(n!==n||r!==r)return this.entries().slice(e,t).fromEntries();var u=0===n?this:this.skip(n);return null==r||r===this.length?u:u.take(r-n)},Sequence.prototype.take=function(e){"use strict";var t=0,n=this.takeWhile(function(){return t++<e});return n.length=this.length&&Math.min(this.length,e),n},Sequence.prototype.takeLast=function(e,t){"use strict";return this.reverse(t).take(e).reverse(t)},Sequence.prototype.takeWhile=function(e,t){"use strict";var n=this,r=n.__makeSequence();return r.__iterateUncached=function(r,u,c){if(u)return this.cacheResult().__iterate(r,u,c);var i=0;return n.__iterate(function(n,u,c){return e.call(t,n,u,c)&&r(n,u,c)!==!1?void i++:!1},u,c),i},r},Sequence.prototype.takeUntil=function(e,t,n){"use strict";return this.takeWhile(not(e),t,n)},Sequence.prototype.skip=function(e,t){"use strict";if(0===e)return this;var n=0,r=this.skipWhile(function(){return n++<e},null,t);return r.length=this.length&&Math.max(0,this.length-e),r},Sequence.prototype.skipLast=function(e,t){"use strict";return this.reverse(t).skip(e).reverse(t)},Sequence.prototype.skipWhile=function(e,t){"use strict";var n=this,r=n.__makeSequence();return r.__iterateUncached=function(r,u,c){if(u)return this.cacheResult().__iterate(r,u,c);var i=!0,o=0;return n.__iterate(function(n,u,c){if(!i||!(i=e.call(t,n,u,c))){if(r(n,u,c)===!1)return!1;o++}},u,c),o},r},Sequence.prototype.skipUntil=function(e,t,n){"use strict";return this.skipWhile(not(e),t,n)},Sequence.prototype.groupBy=function(e){"use strict";var t=this,n=require("./OrderedMap").empty().withMutations(function(n){t.forEach(function(t,r,u){var c=e(t,r,u),i=n.get(c,__SENTINEL);i===__SENTINEL&&(i=[],n.set(c,i)),i.push([r,t])})});return n.map(function(e){return Sequence(e).fromEntries()})},Sequence.prototype.cacheResult=function(){"use strict";return!this.$Sequence_cache&&this.__iterateUncached&&(assertNotInfinite(this.length),this.$Sequence_cache=this.entries().toArray(),null==this.length&&(this.length=this.$Sequence_cache.length)),this},Sequence.prototype.__iterate=function(e,t,n){"use strict";if(!this.$Sequence_cache)return this.__iterateUncached(e,t,n);var r=this.length-1,u=this.$Sequence_cache,c=this;if(t)for(var i=u.length-1;i>=0;i--){var o=u[i];if(e(o[1],n?o[0]:r-o[0],c)===!1)break}else u.every(n?function(t){return e(t[1],r-t[0],c)!==!1}:function(t){return e(t[1],t[0],c)!==!1});return this.length},Sequence.prototype.__makeSequence=function(){"use strict";return makeSequence()},Sequence.prototype.inspect=Sequence.prototype.toSource=function(){return this.toString()},Sequence.prototype.__toJS=Sequence.prototype.toObject;for(var Sequence____Key in Sequence)Sequence.hasOwnProperty(Sequence____Key)&&(IndexedSequence[Sequence____Key]=Sequence[Sequence____Key]);var ____SuperProtoOfSequence=null===Sequence?null:Sequence.prototype;IndexedSequence.prototype=Object.create(____SuperProtoOfSequence),IndexedSequence.prototype.constructor=IndexedSequence,IndexedSequence.__superConstructor__=Sequence,IndexedSequence.prototype.toString=function(){"use strict";return this.__toString("Seq [","]")},IndexedSequence.prototype.toArray=function(){"use strict";assertNotInfinite(this.length);var e=new Array(this.length||0);return e.length=this.forEach(function(t,n){e[n]=t}),e},IndexedSequence.prototype.fromEntries=function(){"use strict";var e=this,t=e.__makeSequence();return t.length=e.length,t.entries=function(){return e},t.__iterateUncached=function(t,n,r){return e.__iterate(function(e,n,r){return t(e[1],e[0],r)},n,r)},t},IndexedSequence.prototype.join=function(e){"use strict";e=e||",";var t="",n=0;return this.forEach(function(r,u){var c=u-n;n=u,t+=(1===c?e:repeatString(e,c))+r}),this.length&&n<this.length-1&&(t+=repeatString(e,this.length-1-n)),t},IndexedSequence.prototype.concat=function(){"use strict";var e=Array.prototype.slice.call(arguments,0),t=[this].concat(e).map(function(e){return Sequence(e)}),n=this.__makeSequence();return n.length=t.reduce(function(e,t){return null!=e&&null!=t.length?e+t.length:void 0},0),n.__iterateUncached=function(e,n,r){if(r&&!this.length)return this.cacheResult().__iterate(e,n,r);for(var u,c=0,i=r&&this.length-1,o=t.length-1,s=0;o>=s&&!u;s++){var a=t[n?o-s:s];a instanceof IndexedSequence||(a=a.values()),c+=a.__iterate(function(t,n,o){return n+=c,e(t,r?i-n:n,o)===!1?(u=!0,!1):void 0},n)}return c},n},IndexedSequence.prototype.reverse=function(e){"use strict";var t=this,n=t.__makeSequence();return n.length=t.length,n.__reversedIndices=!!(e^t.__reversedIndices),n.__iterateUncached=function(n,r,u){return t.__iterate(n,!r,u^e)},n.reverse=function(n){return e===n?t:IndexedSequence.prototype.reverse.call(this,n)},n},IndexedSequence.prototype.values=function(){"use strict";var e=____SuperProtoOfSequence.values.call(this);return e.length=void 0,e},IndexedSequence.prototype.filter=function(e,t,n){"use strict";var r=filterFactory(this,e,t,n,n);return n&&(r.length=this.length),r},IndexedSequence.prototype.indexOf=function(e){"use strict";return this.findIndex(function(t){return Immutable.is(t,e)})},IndexedSequence.prototype.lastIndexOf=function(e){"use strict";return this.reverse(!0).indexOf(e)},IndexedSequence.prototype.findIndex=function(e,t){"use strict";var n=this.findKey(e,t);return null==n?-1:n},IndexedSequence.prototype.findLastIndex=function(e,t){"use strict";return this.reverse(!0).findIndex(e,t)},IndexedSequence.prototype.slice=function(e,t,n){"use strict";var r=this;if(wholeSlice(e,t,r.length))return r;var u=r.__makeSequence(),c=resolveBegin(e,r.length),i=resolveEnd(t,r.length);return u.length=r.length&&(n?r.length:i-c),u.__reversedIndices=r.__reversedIndices,u.__iterateUncached=function(u,o,s){if(o)return this.cacheResult().__iterate(u,o,s);var a=this.__reversedIndices^s;(c!==c||i!==i||a&&null==r.length)&&(r.cacheResult(),c=resolveBegin(e,r.length),i=resolveEnd(t,r.length));var h=a?r.length-i:c,_=a?r.length-c:i,p=r.__iterate(function(e,t,r){return!(t>=h&&(null==_||_>t))||u(e,n?t:t-h,r)!==!1},o,s);return this.length||(n?p:Math.max(0,p-h))},u},IndexedSequence.prototype.splice=function(e,t){"use strict";var n=Array.prototype.slice.call(arguments,2);return 0===t&&0===n.length?this:this.slice(0,e).concat(n,this.slice(e+t))},IndexedSequence.prototype.takeWhile=function(e,t,n){"use strict";var r=this,u=r.__makeSequence();return u.__iterateUncached=function(c,i,o){if(i)return this.cacheResult().__iterate(c,i,o);var s=0,a=!0,h=r.__iterate(function(n,r,u){return e.call(t,n,r,u)&&c(n,r,u)!==!1?void(s=r):(a=!1,!1)},i,o);return n?u.length:a?h:s+1},n&&(u.length=this.length),u},IndexedSequence.prototype.skipWhile=function(e,t,n){"use strict";var r=this,u=r.__makeSequence();return n&&(u.length=this.length),u.__iterateUncached=function(u,c,i){if(c)return this.cacheResult().__iterate(u,c,i);var o=r.__reversedIndices^i,s=!0,a=0,h=r.__iterate(function(r,c,o){return s&&(s=e.call(t,r,c,o),s||(a=c)),s||u(r,i||n?c:c-a,o)!==!1},c,i);return n?h:o?a+1:h-a},u},IndexedSequence.prototype.groupBy=function(e,t,n){"use strict";var r=this,u=require("./OrderedMap").empty().withMutations(function(t){r.forEach(function(u,c,i){var o=e(u,c,i),s=t.get(o,__SENTINEL);s===__SENTINEL&&(s=new Array(n?r.length:0),t.set(o,s)),n?s[c]=u:s.push(u)})});return u.map(function(e){return Sequence(e)})},IndexedSequence.prototype.__makeSequence=function(){"use strict";return makeIndexedSequence(this)},IndexedSequence.prototype.__toJS=IndexedSequence.prototype.toArray,IndexedSequence.prototype.__toStringMapper=quoteString;for(Sequence____Key in Sequence)Sequence.hasOwnProperty(Sequence____Key)&&(ObjectSequence[Sequence____Key]=Sequence[Sequence____Key]);ObjectSequence.prototype=Object.create(____SuperProtoOfSequence),ObjectSequence.prototype.constructor=ObjectSequence,ObjectSequence.__superConstructor__=Sequence,ObjectSequence.prototype.toObject=function(){"use strict";return this.$ObjectSequence_object},ObjectSequence.prototype.get=function(e,t){"use strict";return void 0===t||this.has(e)?this.$ObjectSequence_object[e]:t},ObjectSequence.prototype.has=function(e){"use strict";return this.$ObjectSequence_object.hasOwnProperty(e)},ObjectSequence.prototype.__iterate=function(e,t){"use strict";for(var n=this.$ObjectSequence_object,r=this.$ObjectSequence_keys,u=r.length-1,c=0;u>=c;c++){var i=t?u-c:c;if(e(n[r[i]],r[i],n)===!1)break}return c};for(var IndexedSequence____Key in IndexedSequence)IndexedSequence.hasOwnProperty(IndexedSequence____Key)&&(ArraySequence[IndexedSequence____Key]=IndexedSequence[IndexedSequence____Key]);var ____SuperProtoOfIndexedSequence=null===IndexedSequence?null:IndexedSequence.prototype;ArraySequence.prototype=Object.create(____SuperProtoOfIndexedSequence),ArraySequence.prototype.constructor=ArraySequence,ArraySequence.__superConstructor__=IndexedSequence,ArraySequence.prototype.toArray=function(){"use strict";return this.$ArraySequence_array},ArraySequence.prototype.__iterate=function(e,t,n){"use strict";var r=this.$ArraySequence_array,u=r.length-1,c=-1;if(t){for(var i=u;i>=0;i--){if(r.hasOwnProperty(i)&&e(r[i],n?i:u-i,r)===!1)return c+1;c=i}return r.length}var o=r.every(function(t,i){return e(t,n?u-i:i,r)===!1?!1:(c=i,!0)});return o?r.length:c+1},ArraySequence.prototype.get=ObjectSequence.prototype.get,ArraySequence.prototype.has=ObjectSequence.prototype.has;var __SENTINEL={};exports.Sequence=Sequence,exports.IndexedSequence=IndexedSequence;