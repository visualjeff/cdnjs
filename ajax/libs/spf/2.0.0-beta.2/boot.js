/*
SPF 2.0.0-beta.2
(c) 2012-2014 Google, Inc.
License: MIT
*/
(function(){function f(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(){var c=d.slice();c.push.apply(c,arguments);return a.apply(b,c)}}function h(a,b){if(document.createEvent){var c=document.createEvent("CustomEvent");c.initCustomEvent(a,!0,!0,b);document.dispatchEvent(c)}};var k=window._spf_state||{};window._spf_state=k;var l={};"config"in k||(k.config=l);l=k.config;function n(a,b){if(a.forEach)a.forEach(b,void 0);else for(var c=0,d=a.length;c<d;c++)c in a&&b.call(void 0,a[c],c,a)}function p(a,b){if(a.every)return a.every(b,void 0);for(var c=0,d=a.length;c<d;c++)if(c in a&&!b.call(void 0,a[c],c,a))return!1;return!0}function s(a){return"[object Array]"==Object.prototype.toString.call(a)};function t(a){var b=document;return b.querySelectorAll?b.querySelectorAll(a):[]};function u(a,b){a&&b&&(a in v||(v[a]=[]),v[a].push(b))}function w(a){a in v&&n(v[a],function(a,c,d){d[c]=null;a&&a()})}function x(a,b){a&&b&&a in v&&(v[b]=(v[b]||[]).concat(v[a]),delete v[a])}var v={};"ps-s"in k||(k["ps-s"]=v);v=k["ps-s"];function y(a){var b=document.createElement("a");b.href=a;b.href=b.href;return b.href.split("#")[0]};function z(a,b,c){var d=A,e=d==A;if(s(a)){var q=a;setTimeout(function(){throw Error(d+' load for "'+b+'" called with too many urls '+q+"; pass only one string");},0);a=a[0]}a=B(d,a);var g=b||"^"+a,m=C(d,g);if(b){var r=D(d,b);r&&a!=r&&(h(e?"spfjsbeforeunload":"spfcssbeforeunload",{name:b,urls:[r],url:r}),E(d,b,r),u(m,f(F,null,d,b,r)))}(e=G(d,a))&&g!=e&&(H(d,e),I(d,a),e=C(d,e),x(e,m));J(d,a,g);K(d,g,a);u(m,c);c=f(L,null,d);M(d,a)?c():(a=N(d,a,c))&&b&&a.setAttribute("name",b)}
function aa(a){var b=A,c=D(b,a);E(b,a,c);F(b,a,c)}function E(a,b,c){H(a,b);c&&I(a,c);a=C(a,b);delete v[a]}function F(a,b,c){var d=a==A;c&&(h(d?"spfjsunload":"spfcssunload",{name:b,urls:[c],url:c}),ba(a,c))}function L(a){var b=C(a,""),c;for(c in v)0==c.indexOf(b)&&p(c.substring(b.length).split("|"),f(O,null,a))&&w(c)}
function N(a,b,c){function d(){M(a,b,void 0)&&P(Q,a,b);e&&g&&g.parentNode&&q==document&&g.parentNode.removeChild(g);c&&setTimeout(c,0);return null}var e=a==A;b=B(a,b);P(ca,a,b);var q=document,g=q.createElement(e?"script":"link");if(!b)return d();var m=b?String(b).replace(/[^\w]/g,""):"";g.className=C(a,m);"onload"in g?g.onerror=g.onload=d:g.onreadystatechange=function(){/^c|loade/.test(g.readyState)&&d()};m=q.getElementsByTagName("head")[0];e?(g.async=!0,g.src=b,m.insertBefore(g,m.firstChild)):(g.rel=
"stylesheet",g.href=b,m.appendChild(g));return g}function ba(a,b){var c=(b=B(a,b))?String(b).replace(/[^\w]/g,""):"",c=C(a,c),c=t("."+c);n(c,function(a){a&&a.parentNode&&a.parentNode.removeChild(a)});da(a,b)}function B(a,b){var c="rsrc-p-"+a;if(b){var d=b.indexOf("//");if(0>d){if(0==b.lastIndexOf("hash-",0))return b;c=k[c]||"";if("[object String]"==Object.prototype.toString.call(c))b=c+b;else for(var e in c)b=b.replace(e,c[e]);b=0>b.indexOf("."+a)?b+"."+a:b;b=y(b)}else 0==d&&(b=y(b))}return b}
function C(a,b,c){return a+"-"+b+(c?"-"+c:"")}function P(a,b,c){b=C(b,c,void 0);R[b]=a}function M(a,b,c){a=C(a,b,c);return R[a]}function da(a,b){var c=C(a,b);delete R[c]}function J(a,b,c){a=C(a,b);S[a]=c}function G(a,b){var c=C(a,b);return S[c]}function I(a,b){var c=C(a,b);delete S[c]}function K(a,b,c){a=C(a,b);T[a]=c}function D(a,b){var c=C(a,b),c=T[c];s(c)&&(c=c[0]);return c}function H(a,b){var c=C(a,b);delete T[c]}
function O(a,b){var c=D(a,b),d;!(d=""==b)&&(d=void 0!=c)&&(d=M(a,c),d=""==c||d==Q);return d}var R={},S={},T={},ca=1,Q=2,A="js";"rsrc-s"in k||(k["rsrc-s"]=R);R=k["rsrc-s"];"rsrc-n"in k||(k["rsrc-n"]=S);S=k["rsrc-n"];"rsrc-u"in k||(k["rsrc-u"]=T);T=k["rsrc-u"];function U(a,b,c){a=s(a)?a:[a];var d=[];n(a,function(a){a&&void 0==D(A,a)&&d.push(a)});var e=!d.length;if(b){var q=p(a,f(O,null,A));e&&q?b():(a=C(A,a.sort().join("|")),u(a,b))}c&&!e&&c(d)}function V(a,b){a=s(a)?a:[a];n(a,function(a){if(a){var b=W[a]||a;s(b)&&(b=b[0]);var b=B(A,b),e=D(A,a);e&&b!=e&&X(a)}});U(a,b,ea)}function ea(a){n(a,function(a){function c(){z(e,a,void 0)}var d=Y[a],e=W[a]||a;s(e)&&(e=e[0]);d?V(d,c):c()})}
function X(a){a=s(a)?a:[a];n(a,function(a){var c=[],d;for(d in Y){var e=Y[d],e=s(e)?e:[e];n(e,function(e){e==a&&c.push(d)})}n(c,function(a){X(a)});aa(a)})}var Y={};"js-d"in k||(k["js-d"]=Y);var Y=k["js-d"],W={};"js-u"in k||(k["js-u"]=W);W=k["js-u"];var Z={script:{load:function(a,b,c){z(a,b,c)},get:function(a,b){N(A,a,b)},ready:U,done:function(a){K(A,a,"");L(A)},require:V,declare:function(a,b){if(a){for(var c in a)Y[c]=a[c];if(b)for(c in b)W[c]=b[c]}},path:function(a){k["rsrc-p-"+A]=a}}},fa=this.spf=this.spf||{},$;for($ in Z)fa[$]=Z[$];})();
