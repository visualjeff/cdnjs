(function(c){var b="mmenu",h="offCanvas";var g,e,d,i,k=false;c[b].prototype["_addon_"+h]=function(){if(!this.opts[h]){return this}if(!k){j()}this.opts[h]=a(this.opts[h]);this.conf[h]=f(this.conf[h]);this.vars.opened=false;var n=this.opts[h],l=this.conf[h],m=[g.offcanvas];if(n.position!="left"){m.push(g.mm(n.position))}if(n.zposition!="back"){m.push(g.mm(n.zposition))}this.$menu.addClass(m.join(" ")).parent().removeClass(g.wrapper);this[h+"_initPage"](i.$page);this[h+"_initBlocker"]();this[h+"_initOpenClose"]();this[h+"_bindCustomEvents"]();this.$menu[l.menuInjectMethod+"To"](l.menuWrapperSelector)};c[b].addons=c[b].addons||[];c[b].addons.push(h);c[b].defaults[h]={position:"left",zposition:"back",modal:false,moveBackground:true};c[b].configuration[h]={pageNodetype:"div",pageSelector:null,menuWrapperSelector:"body",menuInjectMethod:"prepend"};c[b].prototype.open=function(){if(this.vars.opened){return false}var l=this;this._openSetup();setTimeout(function(){l._openFinish()},25);return"open"};c[b].prototype._openSetup=function(){i.$allMenus.not(this.$menu).trigger(d.close);i.$page.data(e.style,i.$page.attr("style")||"");i.$wndw.trigger(d.resize,[true]);var l=[g.opened];if(this.opts[h].modal){l.push(g.modal)}if(this.opts[h].moveBackground){l.push(g.background)}if(this.opts[h].position!="left"){l.push(g.mm(this.opts[h].position))}if(this.opts[h].zposition!="back"){l.push(g.mm(this.opts[h].zposition))}if(this.opts.classes){l.push(this.opts.classes)}i.$html.addClass(l.join(" "));this.$menu.addClass(g.current+" "+g.opened)};c[b].prototype._openFinish=function(){var l=this;this.__transitionend(i.$page,function(){l.$menu.trigger(d.opened)},this.conf.transitionDuration);this.vars.opened=true;i.$html.addClass(g.opening);this.$menu.trigger(d.opening)};c[b].prototype.close=function(){if(!this.vars.opened){return false}var l=this;this.__transitionend(i.$page,function(){l.$menu.removeClass(g.current).removeClass(g.opened);i.$html.removeClass(g.opened).removeClass(g.modal).removeClass(g.background).removeClass(g.mm(l.opts[h].position)).removeClass(g.mm(l.opts[h].zposition));if(l.opts.classes){i.$html.removeClass(l.opts.classes)}i.$page.attr("style",i.$page.data(e.style));l.vars.opened=false;l.$menu.trigger(d.closed)},this.conf.transitionDuration);i.$html.removeClass(g.opening);this.$menu.trigger(d.closing);return"close"};c[b].prototype[h+"_initBlocker"]=function(){var l=this;if(!i.$blck){i.$blck=c('<div id="'+g.blocker+'" />').appendTo(i.$body)}i.$blck.off(d.touchstart).on(d.touchstart,function(m){m.preventDefault();m.stopPropagation();i.$blck.trigger(d.mousedown)}).on(d.mousedown,function(m){m.preventDefault();if(!i.$html.hasClass(g.modal)){l.close()}})};c[b].prototype[h+"_initPage"]=function(l){if(!l){l=c(this.conf[h].pageSelector,i.$body);if(l.length>1){c[b].debug("Multiple nodes found for the page-node, all nodes are wrapped in one <"+this.conf[h].pageNodetype+">.");l=l.wrapAll("<"+this.conf[h].pageNodetype+" />").parent()}}l.addClass(g.page);i.$page=l};c[b].prototype[h+"_initOpenClose"]=function(){var l=this;var m=this.$menu.attr("id");if(m&&m.length){if(this.conf.clone){m=g.umm(m)}c('a[href="#'+m+'"]').off(d.click).on(d.click,function(n){n.preventDefault();l.open()})}var m=i.$page.attr("id");if(m&&m.length){c('a[href="#'+m+'"]').on(d.click,function(n){n.preventDefault();l.close()})}};c[b].prototype[h+"_bindCustomEvents"]=function(){var l=this,m=d.open+" "+d.opening+" "+d.opened+" "+d.close+" "+d.closing+" "+d.closed+" "+d.setPage;this.$menu.off(m).on(m,function(n){n.stopPropagation()});this.$menu.on(d.open,function(n){l.open()}).on(d.close,function(n){l.close()}).on(d.setPage,function(o,n){l[h+"_initPage"](n);l[h+"_initOpenClose"]()})};function a(l){return l}function f(l){if(typeof l.pageSelector!="string"){l.pageSelector="> "+l.pageNodetype}return l}function j(){k=true;g=c[b]._c;e=c[b]._d;d=c[b]._e;g.add("offcanvas modal background opening blocker page");e.add("style");d.add("opening opened closing closed setPage");i=c[b].glbl;i.$allMenus=(i.$allMenus||c()).add(this.$menu);i.$wndw.on(d.keydown,function(m){if(i.$html.hasClass(g.opened)){if(m.keyCode==9){m.preventDefault();return false}}});var l=0;i.$wndw.on(d.resize,function(o,n){if(n||i.$html.hasClass(g.opened)){var m=i.$wndw.height();if(n||m!=l){l=m;i.$page.css("minHeight",m)}}})}})(jQuery);