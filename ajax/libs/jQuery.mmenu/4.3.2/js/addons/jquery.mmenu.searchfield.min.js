(function(d){var c="mmenu",i="searchfield";var h,f,e,j,l=false;d[c].prototype["_addon_"+i]=function(){if(!l){k()}this.opts[i]=b(this.opts[i]);this.conf[i]=g(this.conf[i]);var o=this,n=this.opts[i],m=this.conf[i];if(n.add){switch(n.addTo){case"menu":var q=this.$menu;break;case"panels":var q=d("."+h.panel,this.$menu);break;default:var q=d(n.addTo,this.$menu).filter("."+h.panel);break}if(q.length){q.each(function(){var v=d(this),s=v.is("."+h.list)?"li":"div",r=d("<"+s+' class="'+h.search+'" />');r.append('<input placeholder="'+n.placeholder+'" type="text" autocomplete="off" />');if(v.is("."+h.menu)){r.prependTo(o.$menu)}else{var u=v.children().first(),t=(u.is("."+h.subtitle))?"After":"Before";r["insert"+t](u)}if(n.noResults){if(v.is("."+h.menu)){v=v.find("."+h.panel).first()}s=v.is("."+h.list)?"li":"div";d("<"+s+' class="'+h.noresultsmsg+'" />').html(n.noResults).appendTo(v)}})}}if(this.$menu.children("div."+h.search).length){this.$menu.addClass(h.hassearch)}if(n.search){var p=d("."+h.search,this.$menu);if(p.length){p.each(function(){var u=d(this);if(n.addTo=="menu"){var t=d("."+h.panel,o.$menu),z=o.$menu}else{var t=u.closest("."+h.panel),z=t}var y=t.add(t.children("."+h.list)),w=u.find("input"),x=d("> li",y),r=x.filter("."+h.label),v=x.not("."+h.subtitle).not("."+h.label).not("."+h.search).not("."+h.noresultsmsg);var s="> a";if(!n.showLinksOnly){s+=", > span"}w.off(e.keyup+" "+e.change).on(e.keyup,function(A){if(!a(A.keyCode)){u.trigger(e.search)}}).on(e.change,function(A){u.trigger(e.search)});u.off(e.reset+" "+e.search).on(e.reset+" "+e.search,function(A){A.stopPropagation()}).on(e.reset,function(A){u.trigger(e.search,[""])}).on(e.search,function(B,A){if(typeof A=="string"){w.val(A)}else{A=w.val()}A=A.toLowerCase();t.scrollTop(0);v.add(r).addClass(h.hidden);v.each(function(){var C=d(this);if(d(s,C).text().toLowerCase().indexOf(A)>-1){C.add(C.prevAll("."+h.label).first()).removeClass(h.hidden)}});d(t.get().reverse()).each(function(){var E=d(this),C=E.data(f.parent);if(C){var D=E.add(E.find("> ."+h.list)).find("> li").not("."+h.subtitle).not("."+h.search).not("."+h.noresultsmsg).not("."+h.label).not("."+h.hidden);if(D.length){C.removeClass(h.hidden).removeClass(h.nosubresults).prevAll("."+h.label).first().removeClass(h.hidden)}else{if(n.addTo=="menu"){if(E.hasClass(h.current)){C.trigger(e.open)}C.addClass(h.nosubresults)}}}});z[v.not("."+h.hidden).length?"removeClass":"addClass"](h.noresults);o._update()})})}}};d[c].addons=d[c].addons||[];d[c].addons.push(i);d[c].defaults[i]={add:false,addTo:"menu",search:false,placeholder:"Search",noResults:"No results found."};function b(m){if(typeof m=="boolean"){m={add:m,search:m}}if(typeof m!="object"){m={}}m=d.extend(true,{},d[c].defaults[i],m);if(typeof m.showLinksOnly!="boolean"){m.showLinksOnly=(m.addTo=="menu")}return m}function g(m){return m}function k(){l=true;h=d[c]._c;f=d[c]._d;e=d[c]._e;h.add("search hassearch noresultsmsg noresults nosubresults counter");e.add("search reset change");j=d[c].glbl}function a(m){switch(m){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return true}return false}})(jQuery);