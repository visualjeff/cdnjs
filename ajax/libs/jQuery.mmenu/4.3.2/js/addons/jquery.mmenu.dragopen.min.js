(function(d){var c="mmenu",i="dragOpen";var h,f,e,j,l=false;d[c].prototype["_addon_"+i]=function(){if(!d.fn.hammer){return}if(!l){k()}this.opts[i]=a(this.opts[i]);this.conf[i]=g(this.conf[i]);var s=this,m=this.opts[i],t=this.conf[i];if(m.open){var v=0,u=false,n=0,x=0,q="width";switch(this.opts.offCanvas.position){case"left":case"right":q="width";break;default:q="height";break}switch(this.opts.offCanvas.position){case"left":var r={events:e.dragleft+" "+e.dragright,open_dir:"right",close_dir:"left",delta:"deltaX",page:"pageX",negative:false};break;case"right":var r={events:e.dragleft+" "+e.dragright,open_dir:"left",close_dir:"right",delta:"deltaX",page:"pageX",negative:true};break;case"top":var r={events:e.dragup+" "+e.dragdown,open_dir:"down",close_dir:"up",delta:"deltaY",page:"pageY",negative:false};break;case"bottom":var r={events:e.dragup+" "+e.dragdown,open_dir:"up",close_dir:"down",delta:"deltaY",page:"pageY",negative:true};break}var w=this.__valueOrFn(m.pageNode,this.$menu,j.$page);if(typeof w=="string"){w=d(w)}var p=j.$page.find("."+h.mm("fixed-top")+", ."+h.mm("fixed-bottom")),o=j.$page;switch(this.opts.offCanvas.zposition){case"back":o=o.add(p);break;case"front":o=this.$menu;break;case"next":o=o.add(this.$menu).add(p);break}w.hammer().on(e.touchstart+" "+e.mousedown,function(z){if(z.type=="touchstart"){var y=z.originalEvent.touches[0]||z.originalEvent.changedTouches[0],A=y[r.page]}else{if(z.type=="mousedown"){var A=z[r.page]}}switch(s.opts.offCanvas.position){case"right":case"bottom":if(A>=j.$wndw[q]()-m.maxStartPos){v=1}break;default:if(A<=m.maxStartPos){v=1}break}}).on(r.events+" "+e.dragend,function(y){if(v>0){y.gesture.preventDefault();y.stopPropagation()}}).on(r.events,function(z){var y=r.negative?-z.gesture[r.delta]:z.gesture[r.delta];u=(y>n)?r.open_dir:r.close_dir;n=y;if(n>m.threshold){if(v==1){if(j.$html.hasClass(h.opened)){return}v=2;s._openSetup();s.vars.opened=true;j.$html.addClass(h.dragging);x=b(j.$wndw[q]()*t[q].perc,t[q].min,t[q].max)}}if(v==2){o.css(s.opts.offCanvas.position,b(n,10,x)-(s.opts.offCanvas.zposition=="front"?x:0))}}).on(e.dragend,function(y){if(v==2){j.$html.removeClass(h.dragging);o.css(s.opts.offCanvas.position,"");if(u==r.open_dir){s._openFinish()}else{s.close()}}v=0})}};d[c].addons=d[c].addons||[];d[c].addons.push(i);d[c].defaults[i]={open:false,maxStartPos:100,threshold:50};d[c].configuration[i]={width:{perc:0.8,min:140,max:440},height:{perc:0.8,min:140,max:880}};function a(m){if(typeof m=="boolean"){m={open:m}}if(typeof m!="object"){m={}}m=d.extend(true,{},d[c].defaults[i],m);return m}function g(m){return m}function k(){l=true;h=d[c]._c;f=d[c]._d;e=d[c]._e;h.add("dragging");e.add("dragleft dragright dragup dragdown dragend");j=d[c].glbl}function b(o,n,m){if(o<n){o=n}if(o>m){o=m}return o}})(jQuery);