(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(a){!function(p){function x(c){return"boolean"==typeof c&&(c={add:c,search:c}),"object"!=typeof c&&(c={}),c=p.extend(!0,{},p[q].defaults[u],c),"boolean"!=typeof c.showLinksOnly&&(c.showLinksOnly="menu"==c.addTo),c}function g(c){return c}function w(){m=!0,f=p[q]._c,b=p[q]._d,j=p[q]._e,f.add("search hassearch noresultsmsg noresults nosubresults counter"),j.add("search reset change"),k=p[q].glbl}function v(c){switch(c){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return !0}return !1}var f,b,j,k,q="mmenu",u="searchfield",m=!1;p[q].prototype["_addon_"+u]=function(){m||w(),this.opts[u]=x(this.opts[u]),this.conf[u]=g(this.conf[u]);var e=this,l=this.opts[u];if(this.conf[u],l.add){switch(l.addTo){case"menu":var c=this.$menu;break;case"panels":var c=p("."+f.panel,this.$menu);break;default:var c=p(l.addTo,this.$menu).filter("."+f.panel)}c.length&&c.each(function(){var o=p(this),z=o.is("."+f.list)?"li":"div",i=p("<"+z+' class="'+f.search+'" />');if(i.append('<input placeholder="'+l.placeholder+'" type="text" autocomplete="off" />'),o.is("."+f.menu)){i.prependTo(e.$menu)}else{var d=o.children().first(),y=d.is("."+f.subtitle)?"After":"Before";i["insert"+y](d)}l.noResults&&(o.is("."+f.menu)&&(o=o.find("."+f.panel).first()),z=o.is("."+f.list)?"li":"div",p("<"+z+' class="'+f.noresultsmsg+'" />').html(l.noResults).appendTo(o))})}if(this.$menu.children("div."+f.search).length&&this.$menu.addClass(f.hassearch),l.search){var h=p("."+f.search,this.$menu);h.length&&h.each(function(){var C=p(this);if("menu"==l.addTo){var i=p("."+f.panel,e.$menu),B=e.$menu}else{var i=C.closest("."+f.panel),B=i}var z=i.add(i.children("."+f.list)),r=C.find("input"),A=p("> li",z),y=A.filter("."+f.label),d=A.not("."+f.subtitle).not("."+f.label).not("."+f.search).not("."+f.noresultsmsg),o="> a";l.showLinksOnly||(o+=", > span"),r.off(j.keyup+" "+j.change).on(j.keyup,function(n){v(n.keyCode)||C.trigger(j.search)}).on(j.change,function(){C.trigger(j.search)}),C.off(j.reset+" "+j.search).on(j.reset+" "+j.search,function(n){n.stopPropagation()}).on(j.reset,function(){C.trigger(j.search,[""])}).on(j.search,function(t,n){"string"==typeof n?r.val(n):n=r.val(),n=n.toLowerCase(),i.scrollTop(0),d.add(y).addClass(f.hidden),d.each(function(){var D=p(this);p(o,D).text().toLowerCase().indexOf(n)>-1&&D.add(D.prevAll("."+f.label).first()).removeClass(f.hidden)}),p(i.get().reverse()).each(function(){var E=p(this),F=E.data(b.parent);if(F){var D=E.add(E.find("> ."+f.list)).find("> li").not("."+f.subtitle).not("."+f.search).not("."+f.noresultsmsg).not("."+f.label).not("."+f.hidden);D.length?F.removeClass(f.hidden).removeClass(f.nosubresults).prevAll("."+f.label).first().removeClass(f.hidden):"menu"==l.addTo&&(E.hasClass(f.current)&&F.trigger(j.open),F.addClass(f.nosubresults))}}),B[d.not("."+f.hidden).length?"removeClass":"addClass"](f.noresults),e._update()})})}},p[q].addons=p[q].addons||[],p[q].addons.push(u),p[q].defaults[u]={add:!1,addTo:"menu",search:!1,placeholder:"Search",noResults:"No results found."}}(a)}));