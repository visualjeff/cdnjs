!function(){function e(e){for(var n=[],t=Object.keys(e).sort(),r=0;r<t.length;++r){var a=t[r],i=e[a];R(i)||(i=[i]);for(var o=0;o<i.length;++o){var l=i[o];if(!T(l))throw new bn("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{languageMap:e});n.push({"@value":l,"@language":a.toLowerCase()})}}return n}function n(e,t,r){if(R(t))for(var a=0;a<t.length;++a)t[a]=n(e,t[a],r);else if(q(t))t["@list"]=n(e,t["@list"],r);else if(V(t)){P(t)&&(t["@id"]=e.getName(t["@id"]));for(var i=Object.keys(t).sort(),o=0;o<i.length;++o){var l=i[o];"@id"!==l&&(t[l]=n(e,t[l],"@type"===l))}}else T(t)&&r&&0===t.indexOf("_:")&&(t=e.getName(t));return t}function t(e,n,t){if(null===t)return null;var r=C(e,n,{vocab:!0});if("@id"===r)return C(e,t,{base:!0});if("@type"===r)return C(e,t,{vocab:!0,base:!0});var a=en.getContextValue(e,n,"@type");if("@id"===a||"@graph"===r)return{"@id":C(e,t,{base:!0})};if(k(r))return t;if(rval={},null!==a)e.namer&&0===a.indexOf("_:")&&(a=e.namer.getName(a)),rval["@type"]=a;else if(T(t)){var i=en.getContextValue(e,n,"@language");null!==i&&(rval["@language"]=i)}return rval["@value"]=t,rval}function r(e,n,t,a,i,l){if(R(e))for(var s in e)r(e[s],n,t,a,i,l);else{if(T(e)){var u={subject:X(t),property:X(a),object:{nominalValue:e,interfaceName:"IRI"}};return null!==i&&(u.name=i),l(null,u)}if(q(e)){var f=o(e);return r(f,n,t,a,i,l)}if(M(e)){var c=e["@value"],p=e["@type"]||null;F(c)?(c=c.toString(),p=p||ln):_(c)?(c=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),p=p||sn):A(c)&&(c=c.toFixed(0),p=p||un),p=p||fn;var v={nominalValue:c,interfaceName:"LiteralNode",datatype:{nominalValue:p,interfaceName:"IRI"}};"@language"in e&&p===fn&&(v.language=e["@language"]);var u={subject:X(t),property:X(a),object:v};return null!==i&&(u.name=i),l(null,u)}var d=P(e),h=d?n.getName(e["@id"]):e["@id"],v={nominalValue:h,interfaceName:d?"BlankNode":"IRI"};if(null!==t){var u={subject:X(t),property:X(a),object:X(v)};null!==i&&(u.name=i),l(null,u)}t=v;var g=Object.keys(e).sort();for(var m in g){var y=g[m],x=e[y];"@type"===y&&(y=hn),"@graph"!==y?k(y)||(a={nominalValue:y,interfaceName:"IRI"},r(x,n,t,a,i,l)):r(x,n,null,null,t,l)}}}function a(e,n){if("IRI"===e.interfaceName&&e.nominalValue===dn)return{"@list":[]};if("IRI"===e.interfaceName||"BlankNode"===e.interfaceName)return{"@id":e.nominalValue};var t={"@value":e.nominalValue};if("datatype"in e){var r=e.datatype.nominalValue;if(n){if(r===ln)"true"===t["@value"]?t["@value"]=!0:"false"===t["@value"]&&(t["@value"]=!1);else if(J(t["@value"]))if(r===un){var a=parseInt(t["@value"]);a.toFixed(0)===t["@value"]&&(t["@value"]=a)}else r===sn&&(t["@value"]=parseFloat(t["@value"]));-1===[ln,un,sn,fn].indexOf(r)&&(t["@type"]=r)}else t["@type"]=r}return"language"in e&&(t["@language"]=e.language),t}function i(e,n){if(T(e)||T(n))return e===n;var t=["subject","property","object"];for(var r in t){var a=t[r];if(e[a].interfaceName!==n[a].interfaceName||e[a].nominalValue!==n[a].nominalValue)return!1}return e.object.language!==n.object.language?!1:"datatype"in e.object!="datatype"in n.object?!1:"datatype"in e.object&&(e.object.datatype.interfaceName!==n.object.datatype.interfaceName||e.object.datatype.nominalValue!==n.object.datatype.nominalValue)?!1:e.name!==n.name?!1:!0}function o(e){for(var n=e["@list"],t=n.length,r={"@id":dn},a=t-1;a>=0;--a){var i={};i[pn]=[n[a]],i[vn]=[r],r=i}return r}function l(e,n){if("hash"in n[e])return n[e].hash;var t=n[e].statements,r=[];for(var a in t)r.push(Z(t[a],e));r.sort();var i=n[e].hash=jn.hash(r);return i}function s(e,n,t,r,a){function i(a){if(a===v.length)return f=Object.keys(p).sort(),o(0);var s=v[a],c=u(s.subject,e),d=null;if(null!==c?d="p":(c=u(s.object,e),null!==c&&(d="r")),null!==c){var h;h=t.isNamed(c)?t.getName(c):r.isNamed(c)?r.getName(c):l(c,n,t);var g=jn.create();g.update(d),g.update(s.property.nominalValue),g.update(h);var m=g.digest();m in p?p[m].push(c):p[m]=[c]}setTimeout(function(){i(a+1)},0)}function o(e){function i(){function l(e){if(e===m.length)return f(!1);var r=m[e];s(r,n,t,h,function(n,t){return n?a(n):(g+=h.getName(r)+"<"+t.hash+">",h=t.pathNamer,null!==u&&g.length>=u.length&&g>u?f(!0):void l(e+1))})}function f(n){!n&&(null===u||u>g)&&(u=g,v=h),d.hasNext()?setTimeout(function(){i()},0):(c.update(u),r=v,o(e+1))}var p=d.next(),h=r.clone(),g="",m=[];for(var y in p){var x=p[y];if(t.isNamed(x)?g+=t.getName(x):(h.isNamed(x)||m.push(x),g+=h.getName(x)),null!==u&&g.length>=u.length&&g>u)return f(!0)}l(0)}if(e===f.length)return a(null,{hash:c.digest(),pathNamer:r});var l=f[e];c.update(l);var u=null,v=null,d=new Permutator(p[l]);setTimeout(function(){i()},0)}var f,c=jn.create(),p={},v=n[e].statements;setTimeout(function(){i(0)},0)}function u(e,n){return"BlankNode"===e.interfaceName&&e.nominalValue!==n?e.nominalValue:null}function f(e,n,t,r,a,i){if(R(e))for(var o in e)f(e[o],n,t,r,void 0,i);else{if(!V(e))return void(i&&i.push(e));if("@type"in e){var l=e["@type"];R(l)||(l=[l]);for(var s=0;s<l.length;++s){var u=l[s],c=0===u.indexOf("_:")?r.getName(u):u;c in n[t]||(n[t][c]={"@id":c})}}if(M(e))return void(i&&i.push(e));U(a)&&(a=P(e)?r.getName(e["@id"]):e["@id"]),i&&i.push({"@id":a});var p=n[t],v=p[a]=p[a]||{};v["@id"]=a;for(var d=Object.keys(e).sort(),h=0;h<d.length;++h){var g=d[h];if("@id"!==g)if("@graph"!==g)if("@type"!==g&&k(g))v[g]=e[g];else{var m=e[g];if(0!==m.length)for(var y=0;y<m.length;++y){var x=m[y];if(z(x)||B(x)){var c=P(x)?r.getName(x["@id"]):x["@id"];en.addValue(v,g,{"@id":c},{propertyIsArray:!0}),f(x,n,t,r,c)}else if(q(x)){var b=[];f(x["@list"],n,t,r,a,b),x={"@list":b},en.addValue(v,g,x,{propertyIsArray:!0})}else f(x,n,t,r,a),en.addValue(v,g,x,{propertyIsArray:!0})}else en.addValue(v,g,[],{propertyIsArray:!0})}else{a in n||(n[a]={});var w="@merged"===t?t:a;f(e[g],n,w,r)}}}}function c(e,n,t,r,a){v(e,t),t=t[0];var i=d(e,n,t),o=e.options,l=p(t,o,"embed"),s=p(t,o,"explicit"),u=Object.keys(i).sort();for(var f in u){var h=u[f];null===a&&(e.embeds={});var x={};x["@id"]=h;var b={parent:r,property:a};if(l&&h in e.embeds){l=!1;var w=e.embeds[h];if(R(w.parent)){for(var j in w.parent)if(en.compareValues(x,w.parent[j])){l=!0;break}}else en.hasValue(w.parent,w.property,x)&&(l=!0);l&&m(e,h)}if(l){e.embeds[h]=b;var N=i[h],O=Object.keys(N).sort();for(var j in O){var I=O[j];if(k(I))x[I]=X(N[I]);else if(I in t){var C=N[I];for(var j in C){var S=C[j];if(q(S)){var E={"@list":[]};y(e,x,I,E);var V=S["@list"];for(var D in V)S=V[D],B(S)?c(e,[S["@id"]],t[I],E,"@list"):y(e,E,"@list",X(S))}else B(S)?c(e,[S["@id"]],t[I],x,I):y(e,x,I,X(S))}}else s||g(e,N,I,x)}var O=Object.keys(t).sort();for(var j in O){var I=O[j];if(!k(I)){var L=t[I][0],T=p(L,o,"omitDefault");if(!(T||I in x)){var A="@null";"@default"in L&&(A=X(L["@default"])),R(A)||(A=[A]),x[I]=[{"@preserve":[A]}]}}}y(e,r,a,x)}else y(e,r,a,x)}}function p(e,n,t){var r="@"+t;return r in e?e[r][0]:n[t]}function v(e,n){if(!R(n)||1!==n.length||!V(n[0]))throw new bn("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:n})}function d(e,n,t){var r={};for(var a in n){var i=n[a],o=e.subjects[i];h(o,t)&&(r[i]=o)}return r}function h(e,n){if("@type"in n&&(1!==n["@type"].length||!V(n["@type"][0]))){var t=n["@type"];for(var r in t)if(en.hasValue(e,"@type",t[r]))return!0;return!1}for(var a in n)if(!("@id"!==a&&k(a)||a in e))return!1;return!0}function g(e,n,t,r){var a=n[t];for(var i in a){var o=a[i];if(q(o)){var l={"@list":[]};return y(e,r,t,l),g(e,o,"@list",l["@list"])}if(B(o)){var s=o["@id"];if(!(s in e.embeds)){var u={parent:r,property:t};e.embeds[s]=u,o={};var f=e.subjects[s];for(var c in f)k(c)?o[c]=X(f[c]):g(e,f,c,o)}y(e,r,t,o)}else y(e,r,t,X(o))}}function m(e,n){var t=e.embeds,r=t[n],a=r.parent,i=r.property,o={"@id":n};if(R(a)){for(var l in a)if(en.compareValues(a[l],o)){a[l]=o;break}}else{var s=R(a[i]);en.removeValue(a,i,o,{propertyIsArray:s}),en.addValue(a,i,o,{propertyIsArray:s})}var u=function(e){var n=Object.keys(t);for(var r in n){var a=n[r];a in t&&V(t[a].parent)&&t[a].parent["@id"]===e&&(delete t[a],u(a))}};u(n)}function y(e,n,t,r){V(n)?en.addValue(n,t,r,{propertyIsArray:!0}):n.push(r)}function x(e,n){if(R(n)){var t=[];for(var r in n){var a=x(e,n[r]);null!==a&&t.push(a)}n=t}else if(V(n)){if("@preserve"in n)return"@null"===n["@preserve"]?null:n["@preserve"];if(M(n))return n;if(q(n))return n["@list"]=x(e,n["@list"]),n;for(var i in n){var a=x(e,n[i]),o=en.getContextValue(e,i,"@container");R(a)&&1===a.length&&null===o&&(a=a[0]),n[i]=a}}return n}function b(e,n){return e.length<n.length?-1:n.length<e.length?1:e===n?0:n>e?-1:1}function w(e,n,t,r,a,i,o){a.push("@none"),null===o&&(o="@null");for(var l=[o,"@none"],s=null,u=e.inverse[n],f=0;null===s&&f<a.length;++f){var c=a[f];if(c in u)for(var p=u[c][i],v=0;null===s&&v<l.length;++v){var d=l[v];if(d in p){var h=p[d];if(V(r))for(var g=0;g<h.propertyGenerators.length;++g){for(var m=h.propertyGenerators[g],y=e.mappings[m]["@id"],x=!0,b=0;b<y.length;++b)if(!(y[b]in r)){x=!1;break}if(x){s=m;break}}null===s&&(s=h.term)}}}return s}function j(e,n,t,r,a){if(null===n)return n;if(k(n)){var i=e.keywords[n];return i.length>0?i[0]:n}U(t)&&(t=null),U(a)&&(a=null),r=r||{};var o=e.getInverse(),l=e["@language"]||"@none";if(n in o){var s=[];V(t)&&"@index"in t&&s.push("@index");var u="@language",f="@null";if(q(t)){"@index"in t||s.push("@list");for(var c=t["@list"],p=0===c.length?l:null,v=null,d=0;d<c.length;++d){var h=c[d],g="@none",m="@none";if(M(h)&&("@language"in h?g=h["@language"]:"@type"in h?m=h["@type"]:g="@null"),null===p?p=g:g!==p&&M(h)&&(p="@none"),null===v?v=m:m!==v&&(v="@none"),"@none"===p&&"@none"===v)break}p=p||"@none",v=v||"@none","@none"!==v?(u="@type",f=v):f=p}else M(t)?"@language"in t?(s.push("@language"),f=t["@language"]):"@type"in t&&(u="@type",f=t["@type"]):(u="@type",f="@id"),s.push("@set");var y=w(e,n,t,a,s,u,f);if(null!==y)return y}var x=null;for(var y in e.mappings)if(-1===y.indexOf(":")){var j=e.mappings[y];if(j&&!j.propertyGenerator&&j["@id"]!==n&&0===n.indexOf(j["@id"])){var N=y+":"+n.substr(j["@id"].length),O=!(N in e.mappings)||null===t&&e.mappings[N]&&e.mappings[N]["@id"]===n;O&&(null===x||b(N,x)<0)&&(x=N)}}if(null!==x)return x;if(r.vocab&&"@vocab"in e){var I=e["@vocab"];if(0===n.indexOf(I)&&n!==I){var C=n.substr(I.length);if(!(C in e.mappings))return C}}return n}function N(e,n,t){if(M(t)){var r=en.getContextValue(e,n,"@type"),a=en.getContextValue(e,n,"@language"),i=en.getContextValue(e,n,"@container"),o="@index"in t&&"@index"!==i;if(!o&&(t["@type"]===r||t["@language"]===a))return t["@value"];var l=Object.keys(t).length,s=1===l||2===l&&"@index"in t&&!o,u="@language"in e,f=T(t["@value"]),c=e.mappings[n]&&null===e.mappings[n]["@language"];if(s&&(!u||!f||c))return t["@value"];var p={};return o&&(p[j(e,"@index")]=t["@index"]),"@type"in t?p[j(e,"@type")]=j(e,t["@type"],null,{base:!0,vocab:!0}):"@language"in t&&(p[j(e,"@language")]=t["@language"]),p[j(e,"@value")]=t["@value"],p}var v=C(e,n),r=en.getContextValue(e,n,"@type"),d=j(e,t["@id"],null,{base:!0});if("@id"===r||"@graph"===v)return d;var p={};return p[j(e,"@id")]=d,p}function O(e,n,t,r,a){for(var i=e.mappings[a]["@id"],o=0;o<i.length;++o){var l=i[o];if(l!==t)for(var s=n[l],u=0;u<s.length;++u){var f=s[u];if(en.compareValues(f,r)){s.splice(u,1),0===s.length&&delete n[l];break}}}}function I(e,n,t,r){if(t in r){if(r[t])return;throw new bn("Cyclical context definition detected.","jsonld.CyclicalContext",{context:n,term:t})}r[t]=!1;var a=t.indexOf(":"),i=null;if(-1!==a&&(i=t.substr(0,a),i in n&&I(e,n,i,r)),k(t))throw new bn("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{context:n});if(e.mappings[t]){var o=e.mappings[t]["@id"];if(k(o)){var l=e.keywords[o];l.splice(l.indexOf(t),1)}}var s=n[t];if(null===s||V(s)&&null===s["@id"])return e.mappings[t]=null,void(r[t]=!0);if(T(s)){if(k(s)){if("@context"===s||"@preserve"===s)throw new bn("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError");var l=e.keywords[s];-1===l.indexOf(t)&&(l.push(t),l.sort(b))}else s=C(e,s,{base:!0},n,r);return e.mappings[t]={"@id":s},void(r[t]=!0)}if(!V(s))throw new bn("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{context:n});var u={};if(u.propertyGenerator=!1,null!==i&&e.mappings[i]&&(u=X(e.mappings[i])),"@id"in s){var f=s["@id"];if(R(f)){if(null===e.namer)throw new bn("Incompatible JSON-LD options; a property generator was found in the @context, but blank node renaming has been disabled; it must be enabled to use property generators.","jsonld.OptionsError",{context:n});for(var c=[],p=f,v=0;v<p.length;++v){if(f=p[v],!T(f))throw new bn("Invalid JSON-LD syntax; property generators must consist of an @id array containing only strings.","jsonld.SyntaxError",{context:n});"@type"!==f&&(f=C(e,f,{base:!0},n,r)),c.push(f)}u["@id"]=c.sort(),u.propertyGenerator=!0}else{if(!T(f))throw new bn("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{context:n});"@type"!==f&&(f=C(e,f,{base:!0},n,r)),u["@id"]=f}}else if(null===i){if(!("@vocab"in e))throw new bn("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{context:n,term:t});u["@id"]=e["@vocab"]+t}else if(i in e.mappings){var d=t.substr(a+1);u["@id"]=e.mappings[i]["@id"]+d}else u["@id"]=t;if("@type"in s){var h=s["@type"];if(!T(h))throw new bn("Invalid JSON-LD syntax; @context @type values must be strings.","jsonld.SyntaxError",{context:n});"@id"!==h&&(h=C(e,h,{vocab:!0,base:!0},n,r)),u["@type"]=h}if("@container"in s){var g=s["@container"];if("@list"!==g&&"@set"!==g&&"@index"!==g&&"@language"!==g)throw new bn("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{context:n});u["@container"]=g}if("@language"in s&&!("@type"in s)){var m=s["@language"];if(null!==m&&!T(m))throw new bn("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{context:n});null!==m&&(m=m.toLowerCase()),u["@language"]=m}e.mappings[t]=u,r[t]=!0}function C(e,n,t,r,a){if(null===n)return null;r&&n in r&&a[n]!==!0&&I(e,r,n,a);var i=e.mappings[n];if(null===i)return null;if(r&&i&&i.propertyGenerator)throw new bn("Invalid JSON-LD syntax; a term definition cannot have a property generator as a dependency.","jsonld.SyntaxError",{context:r,value:n});var o=!1,l=n;if(i&&!i.propertyGenerator&&(o=!0,l=i["@id"]),k(l))return l;if(!o){var s=l.indexOf(":");if(-1!==s){o=!0;var u=l.substr(0,s),f=l.substr(s+1);"_"!==u&&0!==f.indexOf("//")&&(r&&u in r&&a[u]!==!0&&I(e,r,u,a),i=e.mappings[u],i&&!i.propertyGenerator&&(l=e.mappings[u]["@id"]+f))}}if(t=t||{},o?!r&&0===l.indexOf("_:")&&e.namer&&(l=e.namer.getName(l)):t.vocab&&"@vocab"in e?l=e["@vocab"]+l:t.base&&(l=S(e["@base"],l)),r&&!G(l))throw new bn("Invalid JSON-LD syntax; a @context value does not expand to an absolute IRI.","jsonld.SyntaxError",{context:r,value:n});return l}function S(e,n){if(-1!==n.indexOf(":"))return n;T(e)&&(e=en.url.parse(e||""),e.pathname=e.pathname||"");var t=e.host||"",r=en.url.parse(n);r.pathname=r.pathname||"";var a;0===r.href.indexOf("//")?(a=r.href.substr(2),t=a.substr(0,a.lastIndexOf("/")),a=a.substr(t.length)):0===r.pathname.indexOf("/")?a=r.pathname:(a=e.pathname,""!==r.pathname&&(a=a.substr(0,a.lastIndexOf("/")+1)+r.pathname));var i=a.split("/");i=i.filter(function(e,n){return"."!==e&&(""!==e||n===i.length-1)});for(var o=0;o<i.length;){var l=i[o];if(".."===l){if(0===o){var s=i[i.length-1];i=".."!==s?[s]:[];break}i.splice(o-1,2),o-=1}else o+=1}return a="/"+i.join("/"),r.query&&(a+="?"+r.query),r.hash&&(a+=r.hash),(e.protocol||"")+"//"+t+a}function E(e){function n(e){if(e||(e=this),e.inverse)return e.inverse;for(var n=e.inverse={},r=e["@language"]||"@none",a=e.mappings,i=Object.keys(a).sort(b),o=0;o<i.length;++o){var l=i[o],s=a[l];if(null!==s){var u=s["@id"];R(u)||(u=[u]);for(var f=0;f<u.length;++f){var c=u[f],p=n[c];p||(n[c]=p={});var v=s["@container"]||"@none";if(p[v]||(p[v]={"@language":{},"@type":{}},p[v]["@language"][r]={term:null,propertyGenerators:[]}),p=p[v],!("@type"in s))if("@language"in s){var d=s["@language"]||"@null";t(s,l,p["@language"],d)}else t(s,l,p["@language"],r),t(s,l,p["@language"],"@none");if(!("@language"in s)){var h=s["@type"]||"@none";t(s,l,p["@type"],h)}}}}return n}function t(e,n,t,r){r in t||(t[r]={term:null,propertyGenerators:[]});var a=t[r];e.propertyGenerator?a.propertyGenerators.push(n):null===a.term&&(a.term=n)}function r(){var e={};return e["@base"]=this["@base"],e.keywords=X(this.keywords),e.mappings=X(this.mappings),e.namer=this.namer,e.clone=this.clone,e.share=this.share,e.inverse=null,e.getInverse=this.getInverse,e}function a(){var e={};return e["@base"]=this["@base"],e.keywords=this.keywords,e.mappings=this.mappings,e.namer=this.namer.clone(),e.clone=this.clone,e.share=this.share,e.inverse=this.inverse,e.getInverse=this.getInverse,e}var i=null;e.renameBlankNodes&&(i=new K("_:t"));var o=en.url.parse(e.base||"");return o.pathname=o.pathname||"",{"@base":o,mappings:{},keywords:{"@index":[],"@context":[],"@container":[],"@default":[],"@embed":[],"@explicit":[],"@graph":[],"@id":[],"@language":[],"@list":[],"@omitDefault":[],"@preserve":[],"@set":[],"@type":[],"@value":[],"@vocab":[]},namer:i,inverse:null,getInverse:n,clone:r,share:a}}function k(e,n){if(!T(e))return!1;if(n){if(e in n.keywords)return!0;for(var t in n.keywords){var r=n.keywords[t];if(-1!==r.indexOf(e))return!0}}else switch(e){case"@index":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function V(e){return"[object Object]"===Object.prototype.toString.call(e)}function D(e){return V(e)&&0===Object.keys(e).length}function R(e){return Array.isArray(e)}function L(e){if(!T(e)&&!D(e)){var n=!1;if(R(e)){n=!0;for(var t in e)if(!T(e[t])){n=!1;break}}if(!n)throw new bn('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{value:e})}}function T(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function A(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function _(e){return A(e)&&-1!==String(e).indexOf(".")}function J(e){return!isNaN(parseFloat(e))&&isFinite(e)}function F(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function U(e){return"undefined"==typeof e}function z(e){var n=!1;if(V(e)&&!("@value"in e||"@set"in e||"@list"in e)){var t=Object.keys(e).length;n=t>1||!("@id"in e)}return n}function B(e){return V(e)&&1===Object.keys(e).length&&"@id"in e}function M(e){return V(e)&&"@value"in e}function q(e){return V(e)&&"@list"in e}function P(e){var n=!1;return V(e)&&(n="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),n}function G(e){return T(e)&&-1!==e.indexOf(":")}function X(e){if(e&&"object"==typeof e){var n=R(e)?[]:{};for(var t in e)n[t]=X(e[t]);return n}return e}function H(e,n,t,r){var a=Object.keys(n).length;if(R(e)){for(var i in e)H(e[i],n,t,r);return a<Object.keys(n).length}if(V(e)){for(var o in e)if("@context"===o){var l=e[o];if(R(l))for(var s=l.length,i=0;s>i;++i){var u=l[i];T(u)&&(u=S(r,u),t?(u=n[u],R(u)?(Array.prototype.splice.apply(l,[i,1].concat(u)),i+=u.length,s+=u.length):l[i]=u):u in n||(n[u]=!1))}else T(l)&&(l=S(r,l),t?e[o]=n[l]:l in n||(n[l]=!1))}else H(e[o],n,t,r);return a<Object.keys(n).length}return!1}function Y(e,n,t){var r=null,a=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,i=n.resolver,o=function(e,n,t,i,l){if(Object.keys(n).length>xn)return r=new bn("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{max:xn}),l(r);var s={},u=function(){H(e,s,!0,i),l(null,e)};H(e,s,!1,i)||u();var f=[];for(var c in s)if(s[c]===!1){if(!a.test(c))return r=new bn("Malformed URL.","jsonld.InvalidUrl",{url:c}),l(r);f.push(c)}var p=f.length;for(var v in f)!function(e){if(e in n)return r=new bn("Cyclical @context URLs detected.","jsonld.ContextUrlError",{url:e}),l(r);var a=X(n);a[e]=!0,t(e,function(n,i){if(!r){if(!n&&T(i))try{i=JSON.parse(i)}catch(f){n=f}if(n?n=new bn("Derefencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript) or a non-JSON response.","jsonld.InvalidUrl",{url:e,cause:n}):V(i)||(n=new bn("Derefencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{url:e,cause:n})),n)return r=n,l(r);"@context"in i||(i={"@context":{}}),o(i,a,t,e,function(n,t){return n?l(n):(s[e]=t["@context"],p-=1,void(0===p&&u()))})}})}(f[v])};o(e,{},i,n.base,t)}function $(e){var n="(?:<([^:]+:[^>]*)>)",t="(_:(?:[A-Za-z][A-Za-z0-9]*))",r='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+n+")",o="(?:@([a-z]+(?:-[a-z0-9]+)*))",l="(?:"+r+"(?:"+a+"|"+o+")?)",s="[ \\t]+",u="[ \\t]*",f=/(?:\r\n)|(?:\n)|(?:\r)/g,c=new RegExp("^"+u+"$"),p="(?:"+n+"|"+t+")"+s,v=n+s,d="(?:"+n+"|"+t+"|"+l+")"+u,h="(?:\\.|(?:(?:"+n+"|"+t+")"+u+"\\.))",g=new RegExp("^"+u+p+v+d+h+u+"$"),m=[],y=e.split(f),x=0;for(var b in y){var w=y[b];if(x++,!c.test(w)){var j=w.match(g);if(null===j)throw new bn("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:x});var N={};if(N.subject=U(j[1])?{nominalValue:j[2],interfaceName:"BlankNode"}:{nominalValue:j[1],interfaceName:"IRI"},N.property={nominalValue:j[3],interfaceName:"IRI"},U(j[4]))if(U(j[5])){var O=j[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");N.object={nominalValue:O,interfaceName:"LiteralNode"},U(j[7])?U(j[8])||(N.object.language=j[8]):N.object.datatype={nominalValue:j[7],interfaceName:"IRI"}}else N.object={nominalValue:j[5],interfaceName:"BlankNode"};else N.object={nominalValue:j[4],interfaceName:"IRI"};U(j[9])?U(j[10])||(N.name={nominalValue:j[10],interfaceName:"BlankNode"}):N.name={nominalValue:j[9],interfaceName:"IRI"};for(var I in m)!i(m[I],N);m.push(N)}}return m}function Z(e,n){var t=e.subject,r=e.property,a=e.object,i=e.name||null,o="";if(o+="IRI"===t.interfaceName?"<"+t.nominalValue+">":n?t.nominalValue===n?"_:a":"_:z":t.nominalValue,o+=" <"+r.nominalValue+"> ","IRI"===a.interfaceName)o+="<"+a.nominalValue+">";else if("BlankNode"===a.interfaceName)o+=n?a.nominalValue===n?"_:a":"_:z":a.nominalValue;else{var l=a.nominalValue.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');o+='"'+l+'"',"datatype"in a&&a.datatype.nominalValue!==fn?o+="^^<"+a.datatype.nominalValue+">":"language"in a&&(o+="@"+a.language)}return null!==i&&(o+="IRI"===i.interfaceName?" <"+i.nominalValue+">":n?" _:g":" "+i.nominalValue),o+=" .\n"}function Q(e){var n=[],t=e.getSubjects();for(var r in t){var a=t[r];if(null!==a){var i=e.getSubjectTriples(a);if(null!==i){var o=i.predicates;for(var l in o){var s=o[l].objects;for(var u in s){var f=s[u],c={};c.subject=0===a.indexOf("_:")?{nominalValue:a,interfaceName:"BlankNode"}:{nominalValue:a,interfaceName:"IRI"},c.property={nominalValue:l,interfaceName:"IRI"};var p=f.value;if(f.type===mn){an||W();var v=new an;p="";for(var d=0;d<f.value.length;d++)f.value[d].nodeType===on.ELEMENT_NODE?p+=v.serializeToString(f.value[d]):f.value[d].nodeType===on.TEXT_NODE&&(p+=f.value[d].nodeValue)}c.object={nominalValue:p},f.type===yn?c.object.interfaceName=0===f.value.indexOf("_:")?"BlankNode":"IRI":(c.object.interfaceName="LiteralNode",f.type===gn?f.language&&(c.object.language=f.language):c.object.datatype={nominalValue:f.type,interfaceName:"IRI"}),n.push(c)}}}}}return n}function K(e){this.prefix=e,this.counter=0,this.existing={}}function W(){an=require("xmldom").XMLSerializer}var en={};en.compact=function(e,n){function t(e,t,r,a){if(e)return i(e);!a.graph&&R(t)&&1===t.length?t=t[0]:a.graph&&V(t)&&(t=[t]),V(n)&&"@context"in n&&(n=n["@context"]),n=X(n),R(n)||(n=[n]),a.optimizeCtx&&n.push(a.optimizeCtx);var o=n;n=[];for(var l in o)(!V(o[l])||Object.keys(o[l]).length>0)&&n.push(o[l]);var s=n.length>0;if(1===n.length&&(n=n[0]),s||a.graph)if(R(t)){var u=j(r,"@graph"),f=t;t={},s&&(t["@context"]=n),t[u]=f}else if(V(t)){var f=t;t={"@context":n};for(var c in f)t[c]=f[c]}i(null,t,r)}var r={},a=2;arguments.length>3&&(r=arguments[2]||{},a+=1);var i=arguments[a];if(null===e)return i(null,null);"base"in r||(r.base=""),"strict"in r||(r.strict=!0),"optimize"in r||(r.optimize=!1),"graph"in r||(r.graph=!1),"skipExpansion"in r||(r.skipExpansion=!1),"resolver"in r||(r.resolver=en.urlResolver);var o=function(e,n,t){return n.skipExpansion?t(null,e):void en.expand(e,n,t)};o(e,r,function(e,a){if(e)return i(new bn("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var o=E(r);en.processContext(o,n,r,function(e,n){if(e)return i(new bn("Could not process context before compaction.","jsonld.CompactError",{cause:e}));try{r.optimize&&(r.optimizeCtx={});var o=(new wn).compact(n,null,a,r);t(null,o,n,r)}catch(l){i(l)}})})},en.expand=function(e){var n,t={},r=1;arguments.length>2&&(t=arguments[1]||{},r+=1),n=arguments[r],"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),"renameBlankNodes"in t||(t.renameBlankNodes=!0),"keepFreeFloatingNodes"in t||(t.keepFreeFloatingNodes=!1),e=X(e),Y(e,t,function(e,r){if(e)return n(e);try{var a=E(t),i=(new wn).expand(a,null,r,t,!1);V(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),R(i)||(i=[i]),n(null,i)}catch(o){n(o)}})},en.flatten=function(e,n,t,r){"function"==typeof t&&(r=t,t={}),"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),en.expand(e,t,function(e,a){if(e)return r(new bn("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));try{var i=(new wn).flatten(a)}catch(o){return r(o)}return null===n?r(null,i):(t.graph=!0,t.skipExpansion=!0,void en.compact(i,ctx,t,function(e,n,t){if(e)return r(new bn("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));var a=j(t,"@graph");n[a]=x(t,n[a]),r(null,n)}))})},en.frame=function(e,n){var t={},r=2;arguments.length>3&&(t=arguments[2]||{},r+=1);var a=arguments[r];"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),"embed"in t||(t.embed=!0),t.explicit=t.explicit||!1,t.omitDefault=t.omitDefault||!1,t.optimize=t.optimize||!1;var i=n["@context"]||{};en.expand(e,t,function(e,r){if(e)return a(new bn("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var o=X(t);o.keepFreeFloatingNodes=!0,en.expand(n,o,function(e,n){if(e)return a(new bn("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));try{var l=(new wn).frame(r,n,t)}catch(s){return a(s)}o.graph=!0,o.skipExpansion=!0,en.compact(l,i,o,function(e,n,t){if(e)return a(new bn("Could not compact framed output.","jsonld.FrameError",{cause:e}));var r=j(t,"@graph");n[r]=x(t,n[r]),a(null,n)})})})},en.objectify=function(e,n){var t={},r=2;arguments.length>3&&(t=arguments[2]||{},r+=1);var a=arguments[r];"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),en.expand(e,t,function(e,r){if(e)return a(new bn("Could not expand input before framing.","jsonld.FrameError",{cause:e}));try{var i=(new wn).flatten(r)}catch(o){return a(o)}t.graph=!0,t.skipExpansion=!0,en.compact(i,n,t,function(e,n,t){if(e)return a(new bn("Could not compact flattened output.","jsonld.FrameError",{cause:e}));var r=j(t,"@graph");n[r]=x(t,n[r]);var i=n[r][0],o=function(e){if(V(e)||R(e)){if(V(e)){if(o.visited[e["@id"]])return;o.visited[e["@id"]]=!0}for(var n in e){var r=e[n],a="@id"===en.getContextValue(t,n,"@type");if(R(r)||V(r)||a)if(T(r)&&a)e[n]=r=i[r],o(r);else if(R(r))for(var l=0;l<r.length;l++)T(r[l])&&a?r[l]=i[r[l]]:V(r[l])&&"@id"in r[l]&&(r[l]=i[r[l]["@id"]]),o(r[l]);else if(V(r)){var s=r["@id"];e[n]=r=i[s],o(r)}}}};o.visited={},o(i),n.of_type={};for(var l in i)if("@type"in i[l]){var s=i[l]["@type"];R(s)||(s=[s]);for(var u in s)s[u]in n.of_type||(n.of_type[s[u]]=[]),n.of_type[s[u]].push(i[l])}a(null,n)})})},en.normalize=function(e,n){var n,t={},r=1;arguments.length>2&&(t=arguments[1]||{},r+=1),n=arguments[r],"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),en.expand(e,t,function(e,r){return e?n(new bn("Could not expand input before normalization.","jsonld.NormalizeError",{cause:e})):void(new wn).normalize(r,t,n)})},en.fromRDF=function(e){var n,t={},r=1;if(arguments.length>2&&(t=arguments[1]||{},r+=1),n=arguments[r],"useRdfType"in t||(t.useRdfType=!1),"useNativeTypes"in t||(t.useNativeTypes=!0),"format"in t||R(e)||"format"in t||(t.format="application/nquads"),"format"in t){if(!(t.format in nn))throw new bn("Unknown input format.","jsonld.UnknownFormat",{format:t.format});e=nn[t.format](e)}(new wn).fromRDF(e,t,n)},en.toRDF=function(e){var n,t={},r=1;if(arguments.length>2&&(t=arguments[1]||{},r+=1),n=arguments[r],"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),"collate"in t||(t.collate=!1),t.collate){var a=[],o=n;n=function(e,n){if(e)return o(e);if(null!==n){for(var r in a)if(i(a[r],n))return;a.push(n)}else"format"in t&&(a=a.sort().join("")),o(null,a)}}if("format"in t){if("application/nquads"!==t.format)throw new bn("Unknown output format.","jsonld.UnknownFormat",{format:t.format});var l=n;n=function(e,n){return e?l(e):(null!==n&&(n=Z(n)),void l(null,n))}}en.expand(e,t,function(e,t){if(e)return n(new bn("Could not expand input before conversion to RDF.","jsonld.RdfError",{cause:e}));try{var r=new K("_:t");(new wn).toRDF(t,r,null,null,null,n)}catch(a){n(a)}})},en.urlResolver=function(e,n){return n(new bn("Could not resolve @context URL. URL derefencing not implemented.","jsonld.ContextUrlError"))},en.ContextCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=18e5},en.ContextCache.prototype.get=function(e){if(e in this.cache){var n=this.cache[e];if(n.expires>=+new Date)return n.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},en.ContextCache.prototype.set=function(e,n){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:n,expires:+new Date+this.expires}},en.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},en.ActiveContextCache.prototype.get=function(e,n){var t=JSON.stringify(e),r=JSON.stringify(n),a=this.cache[t];return a&&r in a?a[r].share():null},en.ActiveContextCache.prototype.set=function(e,n,t){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var a=JSON.stringify(e),i=JSON.stringify(n);this.order.push({activeCtx:a,localCtx:i}),a in this.cache||(this.cache[a]={}),this.cache[a][i]=t},en.cache={activeCtx:new en.ActiveContextCache},en.urlResolvers={},en.urlResolvers.jquery=function(e){var n=new en.ContextCache;return function(t,r){var a=n.get(t);return null!==a?r(null,a):void e.ajax({url:t,dataType:"json",crossDomain:!0,success:function(e){n.set(t,e),r(null,e)},error:function(e,n,t){r(t)}})}},en.urlResolvers.node=function(){var e=require("request"),n=require("http"),t=new en.ContextCache;return function(r,a){var i=t.get(r);return null!==i?a(null,i):void e(r,function(e,i,o){if(!e&&i.statusCode>=400){var l=n.STATUS_CODES[i.statusCode];e=new bn("URL could not be dereferenced: "+l,"jsonld.InvalidUrl",{url:r,httpStatusCode:i.statusCode})}e||t.set(r,o),a(e,o)})}},en.useUrlResolver=function(e){if(!(e in en.urlResolvers))throw new bn('Unknown @context URL resolver type: "'+e+'"',"jsonld.UnknownUrlResolver",{type:e});en.urlResolver=en.urlResolvers[e].apply(en,Array.prototype.slice.call(arguments,1))},en.processContext=function(e,n){var t={},r=2;arguments.length>3&&(t=arguments[2]||{},r+=1);var a=arguments[r];return"base"in t||(t.base=""),"resolver"in t||(t.resolver=en.urlResolver),null===n?a(null,E(t)):(n=X(n),!V(n)||"@context"in n||(n={"@context":n}),void Y(n,t,function(n,r){if(n)return a(n);
try{r=(new wn).processContext(e,r,t),a(null,r)}catch(i){a(i)}}))},en.hasProperty=function(e,n){var t=!1;if(n in e){var r=e[n];t=!R(r)||r.length>0}return t},en.hasValue=function(e,n,t){var r=!1;if(en.hasProperty(e,n)){var a=e[n],i=q(a);if(R(a)||i){i&&(a=a["@list"]);for(var o in a)if(en.compareValues(t,a[o])){r=!0;break}}else R(t)||(r=en.compareValues(t,a))}return r},en.addValue=function(e,n,t,r){if(r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1),"allowDuplicate"in r||(r.allowDuplicate=!0),R(t)){0!==t.length||!r.propertyIsArray||n in e||(e[n]=[]);for(var a in t)en.addValue(e,n,t[a],r)}else if(n in e){var i=!r.allowDuplicate&&en.hasValue(e,n,t);R(e[n])||i&&!r.propertyIsArray||(e[n]=[e[n]]),i||e[n].push(t)}else e[n]=r.propertyIsArray?[t]:t},en.getValues=function(e,n){var t=e[n]||[];return R(t)||(t=[t]),t},en.removeProperty=function(e,n){delete e[n]},en.removeValue=function(e,n,t,r){r=r||{},"propertyIsArray"in r||(r.propertyIsArray=!1);var a=en.getValues(e,n).filter(function(e){return!en.compareValues(e,t)});0===a.length?en.removeProperty(e,n):e[n]=1!==a.length||r.propertyIsArray?a:a[0]},en.compareValues=function(e,n){if(e===n)return!0;if(M(e)&&M(n)&&e["@value"]===n["@value"]&&e["@type"]===n["@type"]&&e["@language"]===n["@language"]&&e["@index"]===n["@index"])return!0;if(q(e)&&q(n)){if(e["@index"]!==n["@index"])return!1;var t=e["@list"],r=n["@list"];if(t.length!==r.length)return!1;for(var a=0;a<t.length;++a)if(!en.compareValues(t[a],r[a]))return!1;return!0}return V(e)&&"@id"in e&&V(n)&&"@id"in n?e["@id"]===n["@id"]:!1},en.getContextValue=function(e,n,t){var r=null;if(null===n)return r;if("@language"===t&&t in e&&(r=e[t]),e.mappings[n]){var a=e.mappings[n];U(t)?r=a:t in a&&(r=a[t])}return r};var nn={};en.registerRDFParser=function(e,n){nn[e]=n},en.unregisterRDFParser=function(e){delete nn[e]};var tn="undefined"!=typeof module,rn=!tn;if(tn){if(module.exports=en,en.useUrlResolver("node"),"undefined"==typeof an)var an=null;if("undefined"==typeof on)var on={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}"function"==typeof define&&define.amd?define("jsonld",[],function(){return en}):rn&&(window.jsonld=window.jsonld||en);var ln="http://www.w3.org/2001/XMLSchema#boolean",sn="http://www.w3.org/2001/XMLSchema#double",un="http://www.w3.org/2001/XMLSchema#integer",fn="http://www.w3.org/2001/XMLSchema#string",cn="http://www.w3.org/1999/02/22-rdf-syntax-ns#",pn=cn+"first",vn=cn+"rest",dn=cn+"nil",hn=cn+"type",gn=cn+"PlainLiteral",mn=cn+"XMLLiteral",yn=cn+"object",xn=10,bn=function(e,n,t){tn&&(Error.call(this),Error.captureStackTrace(this,this.constructor)),this.name=n||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=t||{}};tn&&require("util").inherits(bn,Error);var wn=function(){};wn.prototype.compact=function(e,n,t,r){if(R(t)){var a=[];for(var i in t){var o=this.compact(e,n,t[i],r);null!==o&&a.push(o)}if(1===a.length){var l=en.getContextValue(e,n,"@container");null===l&&(a=a[0])}return a}if(V(t)){if(M(t)||B(t))return N(e,n,t);var s={};for(var u in t)s[u]=R(t[u])?t[u].slice():t[u];t=s;for(var f=Object.keys(t).sort(),a={},c=0;c<f.length;++c){var u=f[c];if(u in t){var p=t[u];if("@id"!==u&&"@type"!==u)if("@index"!==u){if(0===p.length){var n=j(e,u,null,{vocab:!0},t);en.addValue(a,n,[],{propertyIsArray:!0})}for(var v=0;v<p.length;++v){var d=p[v],n=j(e,u,d,{vocab:!0},t),l=en.getContextValue(e,n,"@container"),h=e.mappings[n];h&&h.propertyGenerator&&O(e,t,u,d,n);var g=q(d),m=null;g&&(m=d["@list"]);var y=this.compact(e,n,g?m:d,r);if(g)if(R(y)||(y=[y]),"@list"!==l){var x={};x[j(e,"@list")]=y,y=x,"@index"in d&&(y[j(e,"@index")]=d["@index"])}else if(n in a)throw new bn('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError");if("@language"===l||"@index"===l){var b;n in a?b=a[n]:a[n]=b={},"@language"===l&&M(y)&&(y=y["@value"]),en.addValue(b,d[l],y)}else{var w="@set"===l||"@list"===l||R(y)&&0===y.length||"@graph"===u;en.addValue(a,n,y,{propertyIsArray:w})}}}else{var l=en.getContextValue(e,n,"@container");if("@index"===l)continue;var I=j(e,u);en.addValue(a,I,p)}else{var C;if(T(p))C=j(e,p,null,{base:!0,vocab:"@type"===u});else{C=[];for(var v=0;v<p.length;++v)C.push(j(e,p[v],null,{base:!0,vocab:!0}))}var I=j(e,u),w=R(C)&&0===p.length;en.addValue(a,I,C,{propertyIsArray:w})}}}return a}return t},wn.prototype.expand=function(r,a,i,o,l){var s=this;if("undefined"==typeof i)throw new bn("Invalid JSON-LD syntax; undefined element.","jsonld.SyntaxError");if(null===i)return null;if(R(i)){var u=[];for(var f in i){var c=s.expand(r,a,i[f],o,l);if(l&&(R(c)||q(c)))throw new bn("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError");null!==c&&(R(c)?u=u.concat(c):u.push(c))}return u}if(V(i)){"@context"in i&&(r=s.processContext(r,i["@context"],o),delete i["@context"]);for(var p=C(r,a),u={},v=Object.keys(i).sort(),d=0;d<v.length;++d){var h,g,m=v[d],y=i[m],x=r.mappings[m];if(h=x&&x.propertyGenerator?x["@id"]:C(r,m,{vocab:!0}),null!==h&&(R(h)||G(h)||k(h,r))){if("@id"===h&&!T(y))throw new bn('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{value:y});if("@type"===h&&L(y),"@graph"===h&&!V(y)&&!R(y))throw new bn('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{value:y});if("@value"===h&&(V(y)||R(y)))throw new bn('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{value:y});if("@language"===h){if(!T(y))throw new bn('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{value:y});g=y.toLowerCase()}if("@index"===h&&!T(y))throw new bn('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{value:y});var b=en.getContextValue(r,m,"@container");if("@language"===b&&V(y))g=e(y);else if("@index"===b&&V(y))g=function(e){for(var n=[],t=Object.keys(y).sort(),a=0;a<t.length;++a){var i=t[a],l=y[i];R(l)||(l=[l]),l=s.expand(r,e,l,o,!1);for(var u=0;u<l.length;++u){var f=l[u];"@index"in f||(f["@index"]=i),n.push(f)}}return n}(m);else{var w="@list"===h;if(w||"@set"===h){var j=a;if(w&&"@graph"===p&&(j=null),g=s.expand(r,j,y,o,w),w&&q(g))throw new bn("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError")}else g=s.expand(r,m,y,o,!1)}if(null!==g||"@value"===h)if("@list"===h||q(g)||"@list"!==b||(g=R(g)?g:[g],g={"@list":g}),R(h)){n(r.namer,g);for(var f=0;f<h.length;++f)en.addValue(u,h[f],X(g),{propertyIsArray:!0})}else{var N=-1===["@index","@id","@type","@value","@language"].indexOf(h);en.addValue(u,h,g,{propertyIsArray:N})}}}v=Object.keys(u);var O=v.length;if("@value"in u){if("@type"in u&&"@language"in u)throw new bn('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{element:u});var I=O-1;if("@type"in u&&(I-=1),"@index"in u&&(I-=1),"@language"in u&&(I-=1),0!==I)throw new bn('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{element:u});null===u["@value"]?u=null:"@language"in u&&!T(u["@value"])&&delete u["@language"]}else if("@type"in u&&!R(u["@type"]))u["@type"]=[u["@type"]];else if("@set"in u||"@list"in u){if(O>1&&2!==O&&"@index"in u)throw new bn('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{element:u});"@set"in u&&(u=u["@set"],v=Object.keys(u),O=v.length)}else 1===O&&"@language"in u&&(u=null);if(!(o.keepFreeFloatingNodes||l||null!==a&&"@graph"!==p))if(0===O||"@value"in u)u=null;else{for(var S=!1,d=0;!S&&d<v.length;++d)k(v[d])&&-1===["@graph","@type","@list"].indexOf(v[d])||(S=!0);S||(u=null)}return u}return l||null!==a&&"@graph"!==C(r,a)?t(r,a,i):null},wn.prototype.flatten=function(e){var n=new K("_:t"),t={"@default":{}};f(e,t,"@default",n);var r=t["@default"];for(var a in t)if("@default"!==a){var i=r[a];i?"@graph"in i||(i["@graph"]=[]):r[a]=i={"@id":a,"@graph":[]};for(var o=i["@graph"],l=t[a],s=Object.keys(l).sort(),u=0;u<s.length;++u){var c=s[u];o.push(l[c])}}for(var p=[],v=Object.keys(r).sort(),d=0;d<v.length;++d){var h=v[d];p.push(r[h])}return p},wn.prototype.frame=function(e,n,t){var r={options:t,graphs:{"@default":{},"@merged":{}}};namer=new K("_:t"),f(e,r.graphs,"@merged",namer),r.subjects=r.graphs["@merged"];var a=[];return c(r,Object.keys(r.subjects).sort(),n,a,null),a},wn.prototype.normalize=function(e,n,t){function r(e,n){if(e)return t(e);if(null===n)return v=new K("_:c14n"),a(Object.keys(p));for(var r in c)if(i(c[r],n))return;c.push(n);var o=["subject","object"];for(var l in o){var s=o[l],u=n[s].nominalValue;"BlankNode"===n[s].interfaceName&&(u in p?p[u].statements.push(n):p[u]={statements:[n]})}}function a(e){function n(i){if(i===e.length)return o(a,r,t);var s=e[i],u=l(s,p,v);u in r?(r[u].push(s),t.push(s)):u in a?(r[u]=[a[u],s],t.push(a[u]),t.push(s),delete a[u]):a[u]=s,setTimeout(function(){n(i+1)},0)}var t=[],r={},a={};setTimeout(function(){n(0)},0)}function o(e,n,t){var r=!1,i=Object.keys(e).sort();for(var o in i){var l=e[i[o]];v.getName(l),r=!0}r?a(t):u(n)}function u(e){function n(a){function i(e,r){if(r===e.length){l.sort(function(e,n){return e=e.hash,n=n.hash,n>e?-1:e>n?1:0});for(var o in l)for(var u in l[o].pathNamer.existing)v.getName(u);return n(a+1)}var f=e[r];if(v.isNamed(f))return i(e,r+1);var c=new K("_:t");c.getName(f),s(f,p,v,c,function(n,a){return n?t(n):(l.push(a),void i(e,r+1))})}if(a===r.length)return f();var o=e[r[a]],l=[];i(o,0)}var r=Object.keys(e).sort();n(0)}function f(){var e=[];for(var r in c){var a=c[r],i=["subject","object"];for(var o in i){var l=i[o];"BlankNode"===a[l].interfaceName&&(a[l].nominalValue=v.getName(a[l].nominalValue))}e.push(Z(a))}return e.sort(),"format"in n?"application/nquads"===n.format?t(null,e.join("")):t(new bn("Unknown output format.","jsonld.UnknownFormat",{format:n.format})):void t(null,$(e.join("")))}var c=[],p={},v=new K("_:t");(new wn).toRDF(e,v,null,null,null,r)},wn.prototype.fromRDF=function(e,n,t){var r={subjects:{},listMap:{}},i={"":r};for(var o in e){var l,s=e[o],u=s.subject.nominalValue,f=s.property.nominalValue,c=s.object,p="name"in s?s.name.nominalValue:"";if(l=p in i?i[p]:i[p]={subjects:{},listMap:{}},f!==pn){if(f!==vn){""===p||p in r.subjects||(r.subjects[p]={"@id":p});var v,d=l.subjects;if(v=u in d?d[u]:d[u]={"@id":u},f!==hn||n.useRdfType){var h=a(c,n.useNativeTypes);if(en.addValue(v,f,h,{propertyIsArray:!0}),"BlankNode"===c.interfaceName){var g,m=h["@id"],y=l.listMap;g=m in y?y[m]:y[m]={},g.head=h}}else en.addValue(v,"@type",c.nominalValue,{propertyIsArray:!0})}else if("BlankNode"===c.interfaceName){var g,y=l.listMap;g=u in y?y[u]:y[u]={},g.rest=c.nominalValue}}else{var g,y=l.listMap;g=u in y?y[u]:y[u]={},g.first=a(c,n.useNativeTypes)}}for(var p in i){var l=i[p],y=l.listMap;for(var x in y){var g=y[x];if("head"in g&&"first"in g){delete g.head["@id"];for(var b=g.head["@list"]=[g.first];"rest"in g;){var w=g.rest;if(g=y[w],!("first"in g))throw new bn("Invalid RDF list entry.","jsonld.RdfError",{bnode:w});b.push(g.first)}}}}var j=[],d=r.subjects,N=Object.keys(d).sort();for(var o in N){var m=N[o],x=d[m];if(j.push(x),m in i){var l=x["@graph"]=[],O=i[m].subjects,I=Object.keys(O).sort();for(var C in I)l.push(O[I[C]])}}t(null,j)},wn.prototype.toRDF=function(e,n,t,a,i,o){r(e,n,t,a,i,o),o(null,null)},wn.prototype.processContext=function(e,n,t){var r=null;if(en.cache.activeCtx&&(r=en.cache.activeCtx.get(e,n)))return r;r=e.clone(),V(n)&&"@context"in n&&R(n["@context"])&&(n=n["@context"]);var a=R(n)?n:[n];for(var i in a){var o=a[i];if(null!==o){if(V(o)&&"@context"in o&&(o=o["@context"]),!V(o))throw new bn("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{context:o});var l={};if("@vocab"in o){var s=o["@vocab"];if(null===s)delete r["@vocab"];else{if(!T(s))throw new bn('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{context:o});if(!G(s))throw new bn('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{context:o});r["@vocab"]=s}l["@vocab"]=!0}if("@language"in o){var s=o["@language"];if(null===s)delete r["@language"];else{if(!T(s))throw new bn('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{context:o});r["@language"]=s.toLowerCase()}l["@language"]=!0}for(var u in o)I(r,o,u,l)}else r=E(t),r.namer=e.namer}return en.cache.activeCtx&&en.cache.activeCtx.set(e,n,r),r},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var n=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);return n}),en.registerRDFParser("application/nquads",$),en.registerRDFParser("rdfa-api",Q),K.prototype.clone=function(){var e=new K(this.prefix);return e.counter=this.counter,e.existing=X(this.existing),e},K.prototype.getName=function(e){if(e&&e in this.existing)return this.existing[e];var n=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=n),n},K.prototype.isNamed=function(e){return e in this.existing},Permutator=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var n in e)this.left[e[n]]=!0},Permutator.prototype.hasNext=function(){return!this.done},Permutator.prototype.next=function(){for(var e=this.list.slice(),n=null,t=0,r=this.list.length,a=0;r>a;++a){var i=this.list[a],o=this.left[i];(null===n||i>n)&&(o&&a>0&&i>this.list[a-1]||!o&&r-1>a&&i>this.list[a+1])&&(n=i,t=a)}if(null===n)this.done=!0;else{var l=this.left[n]?t-1:t+1;this.list[t]=this.list[l],this.list[l]=n;for(var a=0;r>a;++a)this.list[a]>n&&(this.left[this.list[a]]=!this.left[this.list[a]])}return e};var jn=en.sha1={};if(tn){var Nn=require("crypto");jn.create=function(){var e=Nn.createHash("sha1");return{update:function(n){e.update(n,"utf8")},digest:function(){return e.digest("hex")}}}}else jn.create=function(){return new jn.MessageDigest};if(jn.hash=function(e){var n=jn.create();for(var t in e)n.update(e[t]);return n.digest()},!tn){jn.Buffer=function(){this.data="",this.read=0},jn.Buffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},jn.Buffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},jn.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},jn.Buffer.prototype.length=function(){return this.data.length-this.read},jn.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},jn.Buffer.prototype.toHex=function(){for(var e="",n=this.read;n<this.data.length;++n){var t=this.data.charCodeAt(n);16>t&&(e+="0"),e+=t.toString(16)}return e},jn.MessageDigest=function(){On.initialized||On.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new jn.Buffer,this.words=new Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},jn.MessageDigest.prototype.update=function(e){e=unescape(encodeURIComponent(e)),this.messageLength+=e.length,this.input.data+=e,On.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},jn.MessageDigest.prototype.digest=function(){var e=this.messageLength,n=new jn.Buffer;n.data+=this.input.bytes(),n.data+=On.padding.substr(0,64-(e+8)%64),n.putInt32(e>>>29&255),n.putInt32(e<<3&4294967295),On.update(this.state,this.words,n);var t=new jn.Buffer;return t.putInt32(this.state.h0),t.putInt32(this.state.h1),t.putInt32(this.state.h2),t.putInt32(this.state.h3),t.putInt32(this.state.h4),t.toHex()};var On={padding:null,initialized:!1};On.init=function(){On.padding=String.fromCharCode(128);for(var e=String.fromCharCode(0),n=64;n>0;)1&n&&(On.padding+=e),n>>>=1,n>0&&(e+=e);On.initialized=!0},On.update=function(e,n,t){for(var r,a,i,o,l,s,u,f,c=t.length();c>=64;){for(a=e.h0,i=e.h1,o=e.h2,l=e.h3,s=e.h4,f=0;16>f;++f)r=t.getInt32(),n[f]=r,u=l^i&(o^l),r=(a<<5|a>>>27)+u+s+1518500249+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;for(;20>f;++f)r=n[f-3]^n[f-8]^n[f-14]^n[f-16],r=r<<1|r>>>31,n[f]=r,u=l^i&(o^l),r=(a<<5|a>>>27)+u+s+1518500249+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;for(;32>f;++f)r=n[f-3]^n[f-8]^n[f-14]^n[f-16],r=r<<1|r>>>31,n[f]=r,u=i^o^l,r=(a<<5|a>>>27)+u+s+1859775393+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;for(;40>f;++f)r=n[f-6]^n[f-16]^n[f-28]^n[f-32],r=r<<2|r>>>30,n[f]=r,u=i^o^l,r=(a<<5|a>>>27)+u+s+1859775393+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;for(;60>f;++f)r=n[f-6]^n[f-16]^n[f-28]^n[f-32],r=r<<2|r>>>30,n[f]=r,u=i&o|l&(i^o),r=(a<<5|a>>>27)+u+s+2400959708+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;for(;80>f;++f)r=n[f-6]^n[f-16]^n[f-28]^n[f-32],r=r<<2|r>>>30,n[f]=r,u=i^o^l,r=(a<<5|a>>>27)+u+s+3395469782+r,s=l,l=o,o=i<<30|i>>>2,i=a,a=r;e.h0+=a,e.h1+=i,e.h2+=o,e.h3+=l,e.h4+=s,c-=64}}}if(en.url={},tn)en.url.parse=require("url").parse;else{var In={};In.options={key:["href","protocol","host","userInfo","user","password","hostname","port","relative","path","directory","file","query","hash"],parser:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/},en.url.parse=function(e){for(var n=In.options,t=n.parser.exec(e),r={},a=14;a--;)r[n.key[a]]=t[a]||"";return r.host&&""===r.path&&(r.path="/"),r.pathname=r.path,r.query&&(r.path=r.path+"?"+r.query),r.protocol+=":",r.hash&&(r.hash="#"+r.hash),r}}}();