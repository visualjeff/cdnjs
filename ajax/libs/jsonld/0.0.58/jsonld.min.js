!function(){var e="object"==typeof module&&module.exports,t=!e&&("undefined"!=typeof window||"undefined"!=typeof self);t&&"undefined"==typeof global&&("undefined"!=typeof window?global=window:"undefined"!=typeof self?global=self:"undefined"!=typeof $&&(global=$));var n=function(n){function r(){}function a(e){for(var t=[],n=Object.keys(e).sort(),r=0;r<n.length;++r){var a=n[r],o=e[a];_(o)||(o=[o]);for(var i=0;i<o.length;++i){var l=o[i];if(!U(l))throw new It("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{languageMap:e});t.push({"@value":l,"@language":a.toLowerCase()})}}return t}function o(e,t){if(_(t))for(var n=0;n<t.length;++n)t[n]=o(e,t[n]);else if(Y(t))t["@list"]=o(e,t["@list"]);else if(J(t)){G(t)&&(t["@id"]=e.getName(t["@id"]));for(var r=Object.keys(t).sort(),a=0;a<r.length;++a){var i=r[a];"@id"!==i&&(t[i]=o(e,t[i]))}}return t}function i(e,t,r){if(null===r)return null;var a=D(e,t,{vocab:!0});if("@id"===a)return D(e,r,{base:!0});if("@type"===a)return D(e,r,{vocab:!0,base:!0});var o=n.getContextValue(e,t,"@type");if("@id"===o||"@graph"===a&&U(r))return{"@id":D(e,r,{base:!0})};if("@vocab"===o)return{"@id":D(e,r,{vocab:!0,base:!0})};if(A(a))return r;if(rval={},null!==o)rval["@type"]=o;else if(U(r)){var i=n.getContextValue(e,t,"@language");null!==i&&(rval["@language"]=i)}return rval["@value"]=r,rval}function l(e,t){for(var n=[],r=Object.keys(e).sort(),a=0;a<r.length;++a)for(var o=r[a],i=e[o],l=Object.keys(i).sort(),f=0;f<l.length;++f){var c=l[f],d=i[c];if("@type"===c)c=mt;else if(A(c))continue;for(var p=0;p<d.length;++p){var v=d[p],h={};h.type=0===o.indexOf("_:")?"blank node":"IRI",h.value=o;var g={};if(g.type=0===c.indexOf("_:")?"blank node":"IRI",g.value=c,Y(v))u(v["@list"],t,h,g,n);else{var y=s(v);n.push({subject:h,predicate:g,object:y})}}}return n}function u(e,t,n,r,a){for(var o={type:"IRI",value:gt},i={type:"IRI",value:yt},l={type:"IRI",value:xt},u=0;u<e.length;++u){var f=e[u],c={type:"blank node",value:t.getName()};a.push({subject:n,predicate:r,object:c}),n=c,r=o;var d=s(f);a.push({subject:n,predicate:r,object:d}),r=i}a.push({subject:n,predicate:r,object:l})}function s(e){var t={};if($(e)){t.type="literal";var n=e["@value"],r=e["@type"]||null;M(n)?(t.value=n.toString(),t.datatype=r||ct):q(n)||r===dt?(t.value=n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=r||dt):P(n)?(t.value=n.toFixed(0),t.datatype=r||pt):"@language"in e?(t.value=n,t.datatype=r||Ct,t.language=e["@language"]):(t.value=n,t.datatype=r||vt)}else{var a=J(e)?e["@id"]:e;t.type=0===a.indexOf("_:")?"blank node":"IRI",t.value=a}return t}function f(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var n={"@value":e.value};if("language"in e)n["@language"]=e.language;else{var r=e.datatype;if(t){if(r===ct)"true"===n["@value"]?n["@value"]=!0:"false"===n["@value"]&&(n["@value"]=!1);else if(z(n["@value"]))if(r===pt){var a=parseInt(n["@value"]);a.toFixed(0)===n["@value"]&&(n["@value"]=a)}else r===dt&&(n["@value"]=parseFloat(n["@value"]));-1===[ct,pt,dt,vt].indexOf(r)&&(n["@type"]=r)}else r!==vt&&(n["@type"]=r)}return n}function c(e,t){for(var n=["subject","predicate","object"],r=0;r<n.length;++r){var a=n[r];if(e[a].type!==t[a].type||e[a].value!==t[a].value)return!1}return e.object.language!==t.object.language?!1:e.object.datatype!==t.object.datatype?!1:!0}function d(e,t){if("hash"in t[e])return t[e].hash;for(var n=t[e].quads,r=[],a=0;a<n.length;++a)r.push(nt(n[a],n[a].name?n[a].name.value:null,e));r.sort();var o=t[e].hash=Et.hash(r);return o}function p(e,t,r,a,o){function i(o){if(o===c.length)return u=Object.keys(f).sort(),l(0);var s=c[o],p=v(s.subject,e),h=null;if(null!==p?h="p":(p=v(s.object,e),null!==p&&(h="r")),null!==p){var g;g=r.isNamed(p)?r.getName(p):a.isNamed(p)?a.getName(p):d(p,t,r);var y=Et.create();y.update(h),y.update(s.predicate.value),y.update(g);var x=y.digest();x in f?f[x].push(p):f[x]=[p]}n.setImmediate(function(){i(o+1)})}function l(e){function i(){function u(e){if(e===x.length)return f(!1);var n=x[e];p(n,t,r,g,function(t,r){return t?o(t):(y+=g.getName(n)+"<"+r.hash+">",g=r.pathNamer,null!==d&&y.length>=d.length&&y>d?f(!0):void u(e+1))})}function f(t){!t&&(null===d||d>y)&&(d=y,v=g),h.hasNext()?n.setImmediate(function(){i()}):(s.update(d),a=v,l(e+1))}var c=h.next(),g=a.clone(),y="",x=[];for(var m in c){var b=c[m];if(r.isNamed(b)?y+=r.getName(b):(g.isNamed(b)||x.push(b),y+=g.getName(b)),null!==d&&y.length>=d.length&&y>d)return f(!0)}u(0)}if(e===u.length)return o(null,{hash:s.digest(),pathNamer:a});var c=u[e];s.update(c);var d=null,v=null,h=new Permutator(f[c]);n.setImmediate(function(){i()})}var u,s=Et.create(),f={},c=t[e].quads;n.setImmediate(function(){i(0)})}function v(e,t){return"blank node"===e.type&&e.value!==t?e.value:null}function h(e,t,r,a,o,i){if(_(e))for(var l in e)h(e[l],t,r,a,void 0,i);else{if(!J(e))return void(i&&i.push(e));if($(e)){if("@type"in e){var u=e["@type"];0===u.indexOf("_:")&&(e["@type"]=u=a.getName(u)),u in t[r]||(t[r][u]={"@id":u})}return void(i&&i.push(e))}if("@type"in e)for(var s=e["@type"],l=0;l<s.length;++l){var u=s[l];0===u.indexOf("_:")&&a.getName(u)}B(o)&&(o=G(e)?a.getName(e["@id"]):e["@id"]),i&&i.push({"@id":o});var f=t[r],c=f[o]=f[o]||{};c["@id"]=o;for(var d=Object.keys(e).sort(),p=0;p<d.length;++p){var v=d[p];if("@id"!==v)if("@reverse"!==v)if("@graph"!==v)if("@type"!==v&&A(v)){if("@index"===v&&"@index"in c)throw new It("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{subject:c});c[v]=e[v]}else{var g=e[v];if(0===v.indexOf("_:")&&(v=a.getName(v)),0!==g.length)for(var y=0;y<g.length;++y){var x=g[y];if("@type"===v&&(x=0===x.indexOf("_:")?a.getName(x):x,x in t[r]||(t[r][x]={"@id":x})),H(x)||X(x)){var m=G(x)?a.getName(x["@id"]):x["@id"];n.addValue(c,v,{"@id":m},{propertyIsArray:!0,allowDuplicate:!1}),h(x,t,r,a,m)}else if(Y(x)){var b=[];h(x["@list"],t,r,a,o,b),x={"@list":b},n.addValue(c,v,x,{propertyIsArray:!0,allowDuplicate:!1})}else h(x,t,r,a,o),n.addValue(c,v,x,{propertyIsArray:!0,allowDuplicate:!1})}else n.addValue(c,v,[],{propertyIsArray:!0})}else{o in t||(t[o]={});var w="@merged"===r?r:o;h(e[v],t,w,a)}else{var j={"@id":o},C=e["@reverse"];for(var O in C)for(var I=C[O],S=0;S<I.length;++S){var E=I[S];n.addValue(E,O,j,{propertyIsArray:!0,allowDuplicate:!1}),h(E,t,r,a)}}}}}function g(e,t,r,a,o){x(e,r),r=r[0];var i=m(e,t,r),l=e.options,u=y(r,l,"embed"),s=y(r,l,"explicit"),f=Object.keys(i).sort();for(var c in f){var d=f[c];null===o&&(e.embeds={});var p={};p["@id"]=d;var v={parent:a,property:o};if(u&&d in e.embeds){u=!1;var h=e.embeds[d];if(_(h.parent)){for(var b in h.parent)if(n.compareValues(p,h.parent[b])){u=!0;break}}else n.hasValue(h.parent,h.property,p)&&(u=!0);u&&j(e,d)}if(u){e.embeds[d]=v;var O=i[d],I=Object.keys(O).sort();for(var b in I){var S=I[b];if(A(S))p[S]=Q(O[S]);else if(S in r){var E=O[S];for(var b in E){var N=E[b];if(Y(N)){var k={"@list":[]};C(e,p,S,k);var D=N["@list"];for(var L in D)N=D[L],X(N)?g(e,[N["@id"]],r[S],k,"@list"):C(e,k,"@list",Q(N))}else X(N)?g(e,[N["@id"]],r[S],p,S):C(e,p,S,Q(N))}}else s||w(e,O,S,p)}var I=Object.keys(r).sort();for(var b in I){var S=I[b];if(!A(S)){var R=r[S][0],T=y(R,l,"omitDefault");if(!(T||S in p)){var J="@null";"@default"in R&&(J=Q(R["@default"])),_(J)||(J=[J]),p[S]=[{"@preserve":J}]}}}C(e,a,o,p)}else C(e,a,o,p)}}function y(e,t,n){var r="@"+n;return r in e?e[r][0]:t[n]}function x(e,t){if(!_(t)||1!==t.length||!J(t[0]))throw new It("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:t})}function m(e,t,n){var r={};for(var a in t){var o=t[a],i=e.subjects[o];b(i,n)&&(r[o]=i)}return r}function b(e,t){if("@type"in t&&(1!==t["@type"].length||!J(t["@type"][0]))){var r=t["@type"];for(var a in r)if(n.hasValue(e,"@type",r[a]))return!0;return!1}for(var o in t)if(!("@id"!==o&&A(o)||o in e))return!1;return!0}function w(e,t,n,r){var a=t[n];for(var o in a){var i=a[o];if(Y(i)){var l={"@list":[]};return C(e,r,n,l),w(e,i,"@list",l["@list"])}if(X(i)){var u=i["@id"];if(!(u in e.embeds)){var s={parent:r,property:n};e.embeds[u]=s,i={};var f=e.subjects[u];for(var c in f)A(c)?i[c]=Q(f[c]):w(e,f,c,i)}C(e,r,n,i)}else C(e,r,n,Q(i))}}function j(e,t){var r=e.embeds,a=r[t],o=a.parent,i=a.property,l={"@id":t};if(_(o)){for(var u in o)if(n.compareValues(o[u],l)){o[u]=l;break}}else{var s=_(o[i]);n.removeValue(o,i,l,{propertyIsArray:s}),n.addValue(o,i,l,{propertyIsArray:s})}var f=function(e){var t=Object.keys(r);for(var n in t){var a=t[n];a in r&&J(r[a].parent)&&r[a].parent["@id"]===e&&(delete r[a],f(a))}};f(t)}function C(e,t,r,a){J(t)?n.addValue(t,r,a,{propertyIsArray:!0}):t.push(a)}function O(e,t,r){if(_(t)){var a=[];for(var o in t){var i=O(e,t[o],r);null!==i&&a.push(i)}t=a}else if(J(t)){if("@preserve"in t)return"@null"===t["@preserve"]?null:t["@preserve"];if($(t))return t;if(Y(t))return t["@list"]=O(e,t["@list"],r),t;for(var l in t){var i=O(e,t[l],r),u=n.getContextValue(e,l,"@container");r.compactArrays&&_(i)&&1===i.length&&null===u&&(i=i[0]),t[l]=i}}return t}function I(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:t>e?-1:1}function S(e,t,n,r,a,o){null===o&&(o="@null");var i=[];if("@id"!==o&&"@reverse"!==o||!X(n))i.push(o);else{"@reverse"===o&&i.push("@reverse");var l=E(e,n["@id"],null,{vocab:!0});l in e.mappings&&e.mappings[l]&&e.mappings[l]["@id"]===n["@id"]?i.push.apply(i,["@vocab","@id"]):i.push.apply(i,["@id","@vocab"])}i.push("@none");for(var u=e.inverse[t],s=0;s<r.length;++s){var f=r[s];if(f in u)for(var c=u[f][a],d=0;d<i.length;++d){var p=i[d];if(p in c)return c[p]}}return null}function E(e,t,n,r,a){if(null===t)return t;if(B(n)&&(n=null),B(a)&&(a=!1),r=r||{},A(t)&&(r.vocab=!0),r.vocab&&t in e.getInverse()){var o=e["@language"]||"@none",i=[];J(n)&&"@index"in n&&i.push("@index");var l="@language",u="@null";if(a)l="@type",u="@reverse",i.push("@set");else if(Y(n)){"@index"in n||i.push("@list");for(var s=n["@list"],f=0===s.length?o:null,c=null,d=0;d<s.length;++d){var p=s[d],v="@none",h="@none";if($(p)?"@language"in p?v=p["@language"]:"@type"in p?h=p["@type"]:v="@null":h="@id",null===f?f=v:v!==f&&$(p)&&(f="@none"),null===c?c=h:h!==c&&(c="@none"),"@none"===f&&"@none"===c)break}f=f||"@none",c=c||"@none","@none"!==c?(l="@type",u=c):u=f}else $(n)?"@language"in n&&!("@index"in n)?(i.push("@language"),u=n["@language"]):"@type"in n&&(l="@type",u=n["@type"]):(l="@type",u="@id"),i.push("@set");i.push("@none");var g=S(e,t,n,i,l,u);if(null!==g)return g}if(r.vocab&&"@vocab"in e){var y=e["@vocab"];if(0===t.indexOf(y)&&t!==y){var x=t.substr(y.length);if(!(x in e.mappings))return x}}var m=null;for(var g in e.mappings)if(-1===g.indexOf(":")){var b=e.mappings[g];if(b&&b["@id"]!==t&&0===t.indexOf(b["@id"])){var w=g+":"+t.substr(b["@id"].length),j=!(w in e.mappings)||null===n&&e.mappings[w]&&e.mappings[w]["@id"]===t;j&&(null===m||I(w,m)<0)&&(m=w)}}return null!==m?m:r.vocab?t:R(e["@base"],t)}function N(e,t,r){if($(r)){var a=n.getContextValue(e,t,"@type"),o=n.getContextValue(e,t,"@language"),i=n.getContextValue(e,t,"@container"),l="@index"in r&&"@index"!==i;if(!l&&(r["@type"]===a||r["@language"]===o))return r["@value"];var u=Object.keys(r).length,s=1===u||2===u&&"@index"in r&&!l,f="@language"in e,c=U(r["@value"]),d=e.mappings[t]&&null===e.mappings[t]["@language"];if(s&&(!f||!c||d))return r["@value"];var p={};return l&&(p[E(e,"@index")]=r["@index"]),"@type"in r?p[E(e,"@type")]=E(e,r["@type"],null,{vocab:!0}):"@language"in r&&(p[E(e,"@language")]=r["@language"]),p[E(e,"@value")]=r["@value"],p}var v=D(e,t,{vocab:!0}),a=n.getContextValue(e,t,"@type"),h=E(e,r["@id"],null,{vocab:"@vocab"===a});if("@id"===a||"@vocab"===a||"@graph"===v)return h;var p={};return p[E(e,"@id")]=h,p}function k(e,t,n,r){if(n in r){if(r[n])return;throw new It("Cyclical context definition detected.","jsonld.CyclicalContext",{context:t,term:n})}if(r[n]=!1,A(n))throw new It("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{context:t});e.mappings[n]&&delete e.mappings[n];var a=t[n];if(null===a||J(a)&&null===a["@id"])return e.mappings[n]=null,void(r[n]=!0);if(U(a)&&(a={"@id":a}),!J(a))throw new It("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{context:t});var o=e.mappings[n]={};if(o.reverse=!1,"@reverse"in a){if("@id"in a||"@type"in a||"@language"in a)throw new It("Invalid JSON-LD syntax; a @reverse term definition must not contain @id, @type, or @language.","jsonld.SyntaxError",{context:t});var i=a["@reverse"];if(!U(i))throw new It("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{context:t});o["@id"]=D(e,i,{vocab:!0,base:!1},t,r),o["@type"]="@id",o.reverse=!0}else if("@id"in a){var l=a["@id"];if(!U(l))throw new It("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{context:t});l!==n&&(o["@id"]=D(e,l,{vocab:!0,base:!1},t,r))}if(!("@id"in o)){var u=n.indexOf(":");if(-1!==u){var s=n.substr(0,u);if(s in t&&k(e,t,s,r),e.mappings[s]){var f=n.substr(u+1);o["@id"]=e.mappings[s]["@id"]+f}else o["@id"]=n}else{if(!("@vocab"in e))throw new It("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{context:t,term:n});o["@id"]=e["@vocab"]+n}}if(r[n]=!0,"@type"in a){var c=a["@type"];if(!U(c))throw new It("Invalid JSON-LD syntax; @context @type values must be strings.","jsonld.SyntaxError",{context:t});"@id"!==c&&(c=D(e,c,{vocab:!0,base:!0},t,r)),o["@type"]=c}if("@container"in a){var d=a["@container"];if("@list"!==d&&"@set"!==d&&"@index"!==d&&"@language"!==d)throw new It("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{context:t});if(o.reverse&&"@index"!==d)throw new It("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index.","jsonld.SyntaxError",{context:t});o["@container"]=d}if("@language"in a&&!("@type"in a)){var p=a["@language"];if(null!==p&&!U(p))throw new It("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{context:t});null!==p&&(p=p.toLowerCase()),o["@language"]=p}var l=o["@id"];if("@context"===l||"@preserve"===l)throw new It("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError")}function D(e,t,n,r,a){if(null===t||A(t))return t;if(r&&t in r&&a[t]!==!0&&k(e,r,t,a),n=n||{},n.vocab){var o=e.mappings[t];if(null===o)return null;if(o)return o["@id"]}var i=t.indexOf(":");if(-1!==i){var l=t.substr(0,i),u=t.substr(i+1);if("_"===l||0===u.indexOf("//"))return t;r&&l in r&&k(e,r,l,a);var o=e.mappings[l];return o?o["@id"]+u:t}if(n.vocab&&"@vocab"in e)return e["@vocab"]+t;var s=t;if(n.base&&(s=L(e["@base"],s)),r&&!Z(s))throw new It("Invalid JSON-LD syntax; a @context value does not expand to an absolute IRI.","jsonld.SyntaxError",{context:r,value:t});return s}function L(e,t){if(-1!==t.indexOf(":"))return t;U(e)&&(e=n.url.parse(e||""));var r=n.url.parse(t),a=e.protocol||"";r.authority?a+="//"+r.authority:""!==e.href&&(a+="//"+e.authority);var o;0===r.pathname.indexOf("/")?o=r.pathname:(o=e.pathname,""!==r.pathname&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=r.pathname)),o=lt(o,""!==a),r.query&&(o+="?"+r.query),r.hash&&(o+=r.hash);var i=a+o;return""===i&&(i="./"),i}function R(e,t){U(e)&&(e=n.url.parse(e||""));var r="";if(""!==e.href?r+=(e.protocol||"")+"//"+e.authority:t.indexOf("//")&&(r+="//"),0!==t.indexOf(r))return t;for(var a=n.url.parse(t.substr(r.length)),o=e.normalizedPath.split("/"),i=a.normalizedPath.split("/");o.length>0&&i.length>0&&o[0]===i[0];)o.shift(),i.shift();var l="";if(o.length>0){("/"!==e.normalizedPath.substr(-1)||""===o[0])&&o.pop();for(var u=0;u<o.length;++u)l+="../"}return l+=i.join("/"),a.query&&(l+="?"+a.query),a.hash&&(l+=a.hash),""===l&&(l="./"),l}function T(e){function t(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},n=e["@language"]||"@none",a=e.mappings,o=Object.keys(a).sort(I),i=0;i<o.length;++i){var l=o[i],u=a[l];if(null!==u){var s=u["@container"]||"@none",f=u["@id"];_(f)||(f=[f]);for(var c=0;c<f.length;++c){var d=f[c],p=t[d];if(p||(t[d]=p={}),p[s]||(p[s]={"@language":{},"@type":{}}),p=p[s],u.reverse)r(u,l,p["@type"],"@reverse");else if("@type"in u)r(u,l,p["@type"],u["@type"]);else if("@language"in u){var v=u["@language"]||"@null";r(u,l,p["@language"],v)}else r(u,l,p["@language"],n),r(u,l,p["@type"],"@none"),r(u,l,p["@language"],"@none")}}}return t}function r(e,t,n,r){r in n||(n[r]=t)}function a(){var e={};return e["@base"]=this["@base"],e.mappings=Q(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}var o=n.url.parse(e.base||"");return{"@base":o,mappings:{},inverse:null,getInverse:t,clone:a}}function A(e){if(!U(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function J(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return J(e)&&0===Object.keys(e).length}function _(e){return Array.isArray(e)}function V(e){if(!U(e)&&!F(e)){var t=!1;if(_(e)){t=!0;for(var n in e)if(!U(e[n])){t=!1;break}}if(!t)throw new It('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{value:e})}}function U(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function P(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function q(e){return P(e)&&-1!==String(e).indexOf(".")}function z(e){return!isNaN(parseFloat(e))&&isFinite(e)}function M(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function B(e){return"undefined"==typeof e}function H(e){var t=!1;if(J(e)&&!("@value"in e||"@set"in e||"@list"in e)){var n=Object.keys(e).length;t=n>1||!("@id"in e)}return t}function X(e){return J(e)&&1===Object.keys(e).length&&"@id"in e}function $(e){return J(e)&&"@value"in e}function Y(e){return J(e)&&"@list"in e}function G(e){var t=!1;return J(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function Z(e){return U(e)&&-1!==e.indexOf(":")}function Q(e){if(e&&"object"==typeof e){var t=_(e)?[]:{};for(var n in e)t[n]=Q(e[n]);return t}return e}function K(e,t,n,r){var a=Object.keys(t).length;if(_(e)){for(var o in e)K(e[o],t,n,r);return a<Object.keys(t).length}if(J(e)){for(var i in e)if("@context"===i){var l=e[i];if(_(l))for(var u=l.length,o=0;u>o;++o){var s=l[o];U(s)&&(s=L(r,s),n?(s=t[s],_(s)?(Array.prototype.splice.apply(l,[o,1].concat(s)),o+=s.length,u+=s.length):l[o]=s):s in t||(t[s]=!1))}else U(l)&&(l=L(r,l),n?e[i]=t[l]:l in t||(t[l]=!1))}else K(e[i],t,n,r);return a<Object.keys(t).length}return!1}function W(e,t,n){var r=null,a=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,o=t.loadContext,i=function(e,t,n,o,l){if(Object.keys(t).length>Ot)return r=new It("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{max:Ot}),l(r);var u={},s=function(){K(e,u,!0,o),l(null,e)};K(e,u,!1,o)||s();var f=[];for(var c in u)if(u[c]===!1){if(!a.test(c))return r=new It("Malformed URL.","jsonld.InvalidUrl",{url:c}),l(r);f.push(c)}var d=f.length;for(var p in f)!function(e){if(e in t)return r=new It("Cyclical @context URLs detected.","jsonld.ContextUrlError",{url:e}),l(r);var a=Q(t);a[e]=!0,n(e,function(t,o,f){if(!r){if(!t&&U(f))try{f=JSON.parse(f)}catch(c){t=c}if(t?t=new It("Derefencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, or a non-JSON response.","jsonld.InvalidUrl",{url:e,cause:t}):J(f)||(t=new It("Derefencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{url:e,cause:t})),t)return r=t,l(r);"@context"in f||(f={"@context":{}}),i(f,a,n,e,function(t,n){return t?l(t):(u[e]=n["@context"],d-=1,void(0===d&&s()))})}})}(f[p])};i(e,{},o,t.base,n)}function et(e){for(var t="(?:<([^:]+:[^>]*)>)",n="(_:(?:[A-Za-z][A-Za-z0-9]*))",r='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',a="(?:\\^\\^"+t+")",o="(?:@([a-z]+(?:-[a-z0-9]+)*))",i="(?:"+r+"(?:"+a+"|"+o+")?)",l="[ \\t]+",u="[ \\t]*",s=/(?:\r\n)|(?:\n)|(?:\r)/g,f=new RegExp("^"+u+"$"),d="(?:"+t+"|"+n+")"+l,p=t+l,v="(?:"+t+"|"+n+"|"+i+")"+u,h="(?:\\.|(?:(?:"+t+"|"+n+")"+u+"\\.))",g=new RegExp("^"+u+d+p+v+h+u+"$"),y={},x=e.split(s),m=0,b=0;b<x.length;++b){var w=x[b];if(m++,!f.test(w)){var j=w.match(g);if(null===j)throw new It("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:m});var C={};if(C.subject=B(j[1])?{type:"blank node",value:j[2]}:{type:"IRI",value:j[1]},C.predicate={type:"IRI",value:j[3]},B(j[4]))if(B(j[5])){C.object={type:"literal"},B(j[7])?B(j[8])?C.object.datatype=vt:(C.object.datatype=Ct,C.object.language=j[8]):C.object.datatype=j[7];var O=j[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");C.object.value=O}else C.object={type:"blank node",value:j[5]};else C.object={type:"IRI",value:j[4]};var I="@default";if(B(j[9])?B(j[10])||(I=j[10]):I=j[9],I in y){for(var S=!0,E=y[I],N=0;S&&N<E.length;++N)c(E[N],C)&&(S=!1);S&&E.push(C)}else y[I]=[C]}}return y}function tt(e){var t=[];for(var n in e)for(var r=e[n],a=0;a<r.length;++a){var o=r[a];"@default"===n&&(n=null),t.push(nt(o,n))}return t.sort(),t.join("")}function nt(e,t,n){var r=e.subject,a=e.predicate,o=e.object,i=t,l="";if(l+="IRI"===r.type?"<"+r.value+">":n?r.value===n?"_:a":"_:z":r.value,l+=" ",l+="IRI"===a.type?"<"+a.value+">":n?"_:p":a.value,l+=" ","IRI"===o.type)l+="<"+o.value+">";else if("blank node"===o.type)l+=n?o.value===n?"_:a":"_:z":o.value;else{var u=o.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');l+='"'+u+'"',o.datatype===Ct?l+="@"+o.language:o.datatype!==vt&&(l+="^^<"+o.datatype+">")}return null!==i&&(l+=0!==i.indexOf("_:")?" <"+i+">":n?" _:g":" "+i),l+=" .\n"}function rt(e){var t={};t["@default"]=[];for(var n=e.getSubjects(),r=0;r<n.length;++r){var a=n[r];if(null!==a){var o=e.getSubjectTriples(a);if(null!==o){var i=o.predicates;for(var l in i)for(var u=i[l].objects,s=0;s<u.length;++s){var f=u[s],c={};c.subject=0===a.indexOf("_:")?{type:"blank node",value:a}:{type:"IRI",value:a},c.predicate=0===l.indexOf("_:")?{type:"blank node",value:l}:{type:"IRI",value:l};var d=f.value;if(f.type===wt){st||ot();var p=new st;d="";for(var v=0;v<f.value.length;v++)f.value[v].nodeType===ft.ELEMENT_NODE?d+=p.serializeToString(f.value[v]):f.value[v].nodeType===ft.TEXT_NODE&&(d+=f.value[v].nodeValue)}c.object={},f.type===jt?c.object.type=0===f.value.indexOf("_:")?"blank node":"IRI":(c.object.type="literal",f.type===bt?f.language?(c.object.datatype=Ct,c.object.language=f.language):c.object.datatype=vt:c.object.datatype=f.type),c.object.value=d,t["@default"].push(c)}}}}return t}function at(e){this.prefix=e,this.counter=0,this.existing={}}function ot(){st=require("xmldom").XMLSerializer}function it(e){if(-1!==e.href.indexOf(":")||0!==e.href.indexOf("//")||e.host)e.authority=e.host||"",e.auth&&(e.authority=e.auth+"@"+e.authority);else{e.pathname=e.pathname.substr(2);var t=e.pathname.indexOf("/");-1===t?(e.authority=e.pathname,e.pathname=""):(e.authority=e.pathname.substr(0,t),e.pathname=e.pathname.substr(t))}}function lt(e,t){var n="";0===e.indexOf("/")&&(n="/");for(var r=e.split("/"),a=[];r.length>0;)"."===r[0]||""===r[0]&&r.length>1?r.shift():".."!==r[0]?a.push(r.shift()):(r.shift(),t||a.length>0&&".."!==a[a.length-1]?a.pop():a.push(".."));return n+a.join("/")}n.compact=function(e,t,r,a){function o(e,n,r,o){if(e)return a(e);o.compactArrays&&!o.graph&&_(n)?1===n.length?n=n[0]:0===n.length&&(n={}):o.graph&&J(n)&&(n=[n]),J(t)&&"@context"in t&&(t=t["@context"]),t=Q(t),_(t)||(t=[t]);var i=t;t=[];for(var l in i)(!J(i[l])||Object.keys(i[l]).length>0)&&t.push(i[l]);var u=t.length>0;if(1===t.length&&(t=t[0]),_(n)){var s=E(r,"@graph"),f=n;n={},u&&(n["@context"]=t),n[s]=f}else if(J(n)&&u){var f=n;n={"@context":t};for(var c in f)n[c]=f[c]}a(null,n,r)}if(arguments.length<2)return n.nextTick(function(){a(new TypeError("Could not compact, too few arguments."))});if("function"==typeof r&&(a=r,r={}),r=r||{},null===t)return n.nextTick(function(){a(new It("The compaction context must not be null.","jsonld.CompactError"))});if(null===e)return n.nextTick(function(){a(null,null)});"base"in r||(r.base=""),"strict"in r||(r.strict=!0),"compactArrays"in r||(r.compactArrays=!0),"graph"in r||(r.graph=!1),"skipExpansion"in r||(r.skipExpansion=!1),"loadContext"in r||(r.loadContext=n.loadContext);var i=function(e,t,r){n.nextTick(function(){return t.skipExpansion?r(null,e):void n.expand(e,t,r)})};i(e,r,function(e,i){if(e)return a(new It("Could not expand input before compaction.","jsonld.CompactError",{cause:e}));var l=T(r);n.processContext(l,t,r,function(e,t){if(e)return a(new It("Could not process context before compaction.","jsonld.CompactError",{cause:e}));try{var n=(new St).compact(t,null,i,r);o(null,n,t,r)}catch(l){a(l)}})})},n.expand=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not expand, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"base"in t||(t.base=""),"loadContext"in t||(t.loadContext=n.loadContext),"keepFreeFloatingNodes"in t||(t.keepFreeFloatingNodes=!1),void n.nextTick(function(){e=Q(e),W(e,t,function(e,n){if(e)return r(e);try{var a=T(t),o=(new St).expand(a,null,n,t,!1);J(o)&&"@graph"in o&&1===Object.keys(o).length?o=o["@graph"]:null===o&&(o=[]),_(o)||(o=[o]),r(null,o)}catch(i){r(i)}})}))},n.flatten=function(e,t,r,a){return arguments.length<1?n.nextTick(function(){a(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof r&&(a=r,r={}),r=r||{},"base"in r||(r.base=""),"loadContext"in r||(r.loadContext=n.loadContext),void n.expand(e,r,function(e,o){if(e)return a(new It("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));try{var i=(new St).flatten(o)}catch(l){return a(l)}return null===t?a(null,i):(r.graph=!0,r.skipExpansion=!0,void n.compact(i,t,r,function(e,t){return e?a(new It("Could not compact flattened output.","jsonld.FlattenError",{cause:e})):void a(null,t)}))}))},n.frame=function(e,t,r,a){if(arguments.length<2)return n.nextTick(function(){a(new TypeError("Could not frame, too few arguments."))});"function"==typeof r&&(a=r,r={}),r=r||{},"base"in r||(r.base=""),"loadContext"in r||(r.loadContext=n.loadContext),"embed"in r||(r.embed=!0),r.explicit=r.explicit||!1,r.omitDefault=r.omitDefault||!1;var o=t["@context"]||{};n.expand(e,r,function(e,i){if(e)return a(new It("Could not expand input before framing.","jsonld.FrameError",{cause:e}));var l=Q(r);l.keepFreeFloatingNodes=!0,n.expand(t,l,function(e,t){if(e)return a(new It("Could not expand frame before framing.","jsonld.FrameError",{cause:e}));try{var u=(new St).frame(i,t,r)}catch(s){return a(s)}l.graph=!0,l.skipExpansion=!0,n.compact(u,o,l,function(e,t,n){if(e)return a(new It("Could not compact framed output.","jsonld.FrameError",{cause:e}));var r=E(n,"@graph");t[r]=O(n,t[r],l),a(null,t)})})})},n.objectify=function(e,t,r,a){"function"==typeof r&&(a=r,r={}),r=r||{},"base"in r||(r.base=""),"loadContext"in r||(r.loadContext=n.loadContext),n.expand(e,r,function(e,o){if(e)return a(new It("Could not expand input before framing.","jsonld.FrameError",{cause:e}));try{var i=(new St).flatten(o)}catch(l){return a(l)}r.graph=!0,r.skipExpansion=!0,n.compact(i,t,r,function(e,t,o){if(e)return a(new It("Could not compact flattened output.","jsonld.FrameError",{cause:e}));var i=E(o,"@graph");t[i]=O(o,t[i],r);var l=t[i][0],u=function(e){if(J(e)||_(e)){if(J(e)){if(u.visited[e["@id"]])return;u.visited[e["@id"]]=!0}for(var t in e){var r=e[t],a="@id"===n.getContextValue(o,t,"@type");if(_(r)||J(r)||a)if(U(r)&&a)e[t]=r=l[r],u(r);else if(_(r))for(var i=0;i<r.length;i++)U(r[i])&&a?r[i]=l[r[i]]:J(r[i])&&"@id"in r[i]&&(r[i]=l[r[i]["@id"]]),u(r[i]);else if(J(r)){var s=r["@id"];e[t]=r=l[s],u(r)}}}};u.visited={},u(l),t.of_type={};for(var s in l)if("@type"in l[s]){var f=l[s]["@type"];_(f)||(f=[f]);for(var c in f)f[c]in t.of_type||(t.of_type[f[c]]=[]),t.of_type[f[c]].push(l[s])}a(null,t)})})},n.normalize=function(e,t,r){if(arguments.length<1)return n.nextTick(function(){r(new TypeError("Could not normalize, too few arguments."))});"function"==typeof t&&(r=t,t={}),t=t||{},"base"in t||(t.base=""),"loadContext"in t||(t.loadContext=n.loadContext);var a=Q(t);delete a.format,n.toRDF(e,a,function(e,n){return e?r(new It("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e})):void(new St).normalize(n,t,r)})},n.fromRDF=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"useRdfType"in t||(t.useRdfType=!1),"useNativeTypes"in t||(t.useNativeTypes=!1),"format"in t||!U(e)||"format"in t||(t.format="application/nquads"),void n.nextTick(function(){if(t.format){if(!(t.format in ut))throw new It("Unknown input format.","jsonld.UnknownFormat",{format:t.format});e=ut[t.format](e)}(new St).fromRDF(e,t,r)}))},n.toRDF=function(e,t,r){return arguments.length<1?n.nextTick(function(){r(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof t&&(r=t,t={}),t=t||{},"base"in t||(t.base=""),"loadContext"in t||(t.loadContext=n.loadContext),void n.expand(e,t,function(e,n){if(e)return r(new It("Could not expand input before conversion to RDF.","jsonld.RdfError",{cause:e}));try{var a=St.prototype.toRDF(n);if(t.format){if("application/nquads"===t.format)return r(null,tt(a));throw new It("Unknown output format.","jsonld.UnknownFormat",{format:t.format})}r(null,a)}catch(o){r(o)}}))},n.relabelBlankNodes=function(e){o(new at("_:b",e))},n.loadContext=function(e,t){return t(new It("Could not retrieve @context URL. URL derefencing not implemented.","jsonld.ContextUrlError"),e)},n.futures=n.promises=function(){function t(e){var t=o.call(arguments,1);return new a(function(n){e.apply(null,t.concat(function(e,t){e?n.reject(e):n.resolve(t)}))})}function r(e){return function(t,n){e(t).then(function(e){n(null,e.url,e.context)},n)}}var a=e?require("./Future"):global.Future,o=Array.prototype.slice,i={};return i.expand=function(){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");var e=arguments.length>1?arguments[1]:{};return"loadContext"in e&&(e.loadContext=r(e.loadContext)),t.apply(null,[n.expand].concat(o.call(arguments)))},i.compact=function(){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var e=arguments.length>2?arguments[2]:{};"loadContext"in e&&(e.loadContext=r(e.loadContext));var a=function(e,t,r,a){n.compact(e,t,r,function(e,t){a(e,t)})};return t.apply(null,[a].concat(o.call(arguments)))},i.flatten=function(){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");var e=arguments.length>2?arguments[2]:{};return"loadContext"in e&&(e.loadContext=r(e.loadContext)),t.apply(null,[n.flatten].concat(o.call(arguments)))},i.frame=function(){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");var e=arguments.length>2?arguments[2]:{};return"loadContext"in e&&(e.loadContext=r(e.loadContext)),t.apply(null,[n.frame].concat(o.call(arguments)))},i.fromRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return t.apply(null,[n.fromRDF].concat(o.call(arguments)))},i.toRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");
var e=arguments.length>1?arguments[1]:{};return"loadContext"in e&&(e.loadContext=r(e.loadContext)),t.apply(null,[n.toRDF].concat(o.call(arguments)))},i.normalize=function(){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");var e=arguments.length>1?arguments[1]:{};return"loadContext"in e&&(e.loadContext=r(e.loadContext)),t.apply(null,[n.normalize].concat(o.call(arguments)))},i},r.prototype=n.futures(),r.prototype.toString=function(){return this instanceof r?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},n.JsonLdProcessor=r,Object.defineProperty&&(Object.defineProperty(r,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(r.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:r})),t&&"undefined"==typeof global.JsonLdProcessor&&(Object.defineProperty?Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:r}):global.JsonLdProcessor=r),"undefined"!=typeof process&&process.nextTick?(n.nextTick=process.nextTick,n.setImmediate="function"==typeof setImmediate?setImmediate:n.nextTick):"function"==typeof setImmediate?(n.setImmediate=setImmediate,n.nextTick=function(e){return setImmediate(e)}):(n.setImmediate=function(e){setTimeout(e,0)},n.nextTick=n.setImmediate),n.ContextCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=18e5},n.ContextCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},n.ContextCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},n.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},n.ActiveContextCache.prototype.get=function(e,t){var n=JSON.stringify(e),r=JSON.stringify(t),a=this.cache[n];return a&&r in a?a[r]:null},n.ActiveContextCache.prototype.set=function(e,t,n){if(this.order.length===this.size){var r=this.order.shift();delete this.cache[r.activeCtx][r.localCtx]}var a=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:a,localCtx:o}),a in this.cache||(this.cache[a]={}),this.cache[a][o]=n},n.cache={activeCtx:new n.ActiveContextCache},n.contextLoaders={},n.contextLoaders.jquery=function(e,t){t=t||{};var r=new n.ContextCache;return function(n,a){if(t.secure&&0!==n.indexOf("https"))return a(new It('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{url:n}),n);var o=r.get(n);return null!==o?a(null,n,o):void e.ajax({url:n,dataType:"json",crossDomain:!0,success:function(e){r.set(n,e),a(null,n,e)},error:function(e,t,r){a(new It("URL could not be dereferenced, an error occurred.","jsonld.LoadContextError",{url:n,cause:r}),n)}})}},n.contextLoaders.node=function(e){function t(n,l,u){if(e.secure&&0!==n.indexOf("https"))return u(new It('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{url:n}),n);var s=i.get(n);return null!==s?u(null,n,s):void a({url:n,strictSSL:!0,followRedirect:!1},function(e,a,s){if(e)return u(new It("URL could not be dereferenced, an error occurred.","jsonld.LoadContextError",{url:n,cause:e}),n);var f=o.STATUS_CODES[a.statusCode];if(a.statusCode>=400)return u(new It("URL could not be dereferenced: "+f,"jsonld.InvalidUrl",{url:n,httpStatusCode:a.statusCode}),n);if(a.statusCode>=300&&a.statusCode<400&&a.headers.location)return l.length===r?u(new It("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{url:n,httpStatusCode:a.statusCode,redirects:l}),n):-1!==l.indexOf(n)?u(new It("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{url:n,httpStatusCode:a.statusCode,redirects:l}),n):(l.push(n),t(a.headers.location,l,u));l.push(n);for(var c=0;c<l.length;++c)i.set(l[c],s);u(e,n,s)})}e=e||{};var r="maxRedirects"in e?e.maxRedirects:-1,a=require("request"),o=require("http"),i=new n.ContextCache;return function(e,n){t(e,[],n)}},n.useContextLoader=function(e){if(!(e in n.contextLoaders))throw new It('Unknown @context loader type: "'+e+'"',"jsonld.UnknownContextLoader",{type:e});n.loadContext=n.contextLoaders[e].apply(n,Array.prototype.slice.call(arguments,1))},n.processContext=function(e,t){var r={},a=2;arguments.length>3&&(r=arguments[2]||{},a+=1);var o=arguments[a];return"base"in r||(r.base=""),"loadContext"in r||(r.loadContext=n.loadContext),null===t?o(null,T(r)):(t=Q(t),(U(t)||J(t)&&!("@context"in t))&&(t={"@context":t}),void W(t,r,function(t,n){if(t)return o(t);try{n=(new St).processContext(e,n,r),o(null,n)}catch(a){o(a)}}))},n.hasProperty=function(e,t){var n=!1;if(t in e){var r=e[t];n=!_(r)||r.length>0}return n},n.hasValue=function(e,t,r){var a=!1;if(n.hasProperty(e,t)){var o=e[t],i=Y(o);if(_(o)||i){i&&(o=o["@list"]);for(var l in o)if(n.compareValues(r,o[l])){a=!0;break}}else _(r)||(a=n.compareValues(r,o))}return a},n.addValue=function(e,t,r,a){if(a=a||{},"propertyIsArray"in a||(a.propertyIsArray=!1),"allowDuplicate"in a||(a.allowDuplicate=!0),_(r)){0!==r.length||!a.propertyIsArray||t in e||(e[t]=[]);for(var o in r)n.addValue(e,t,r[o],a)}else if(t in e){var i=!a.allowDuplicate&&n.hasValue(e,t,r);_(e[t])||i&&!a.propertyIsArray||(e[t]=[e[t]]),i||e[t].push(r)}else e[t]=a.propertyIsArray?[r]:r},n.getValues=function(e,t){var n=e[t]||[];return _(n)||(n=[n]),n},n.removeProperty=function(e,t){delete e[t]},n.removeValue=function(e,t,r,a){a=a||{},"propertyIsArray"in a||(a.propertyIsArray=!1);var o=n.getValues(e,t).filter(function(e){return!n.compareValues(e,r)});0===o.length?n.removeProperty(e,t):e[t]=1!==o.length||a.propertyIsArray?o:o[0]},n.compareValues=function(e,t){return e===t?!0:$(e)&&$(t)&&e["@value"]===t["@value"]&&e["@type"]===t["@type"]&&e["@language"]===t["@language"]&&e["@index"]===t["@index"]?!0:J(e)&&"@id"in e&&J(t)&&"@id"in t?e["@id"]===t["@id"]:!1},n.getContextValue=function(e,t,n){var r=null;if(null===t)return r;if("@language"===n&&n in e&&(r=e[n]),e.mappings[t]){var a=e.mappings[t];B(n)?r=a:n in a&&(r=a[n])}return r};var ut={};if(n.registerRDFParser=function(e,t){ut[e]=t},n.unregisterRDFParser=function(e){delete ut[e]},e){if("undefined"==typeof st)var st=null;if("undefined"==typeof ft)var ft={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ct="http://www.w3.org/2001/XMLSchema#boolean",dt="http://www.w3.org/2001/XMLSchema#double",pt="http://www.w3.org/2001/XMLSchema#integer",vt="http://www.w3.org/2001/XMLSchema#string",ht="http://www.w3.org/1999/02/22-rdf-syntax-ns#",gt=ht+"first",yt=ht+"rest",xt=ht+"nil",mt=ht+"type",bt=ht+"PlainLiteral",wt=ht+"XMLLiteral",jt=ht+"object",Ct=ht+"langString",Ot=10,It=function(t,n,r){e&&(Error.call(this),Error.captureStackTrace(this,this.constructor)),this.name=n||"jsonld.Error",this.message=t||"An unspecified JSON-LD error occurred.",this.details=r||{}};e&&require("util").inherits(It,Error);var St=function(){};St.prototype.compact=function(e,t,r,a){if(_(r)){var o=[];for(var i in r){var l=this.compact(e,t,r[i],a);null!==l&&o.push(l)}if(a.compactArrays&&1===o.length){var u=n.getContextValue(e,t,"@container");null===u&&(o=o[0])}return o}if(J(r)){if($(r)||X(r))return N(e,t,r);for(var s="@reverse"===t,f=Object.keys(r).sort(),o={},c=0;c<f.length;++c){var d=f[c],p=r[d];if("@id"!==d&&"@type"!==d)if("@reverse"!==d)if("@index"!==d){if(0===p.length){var v=E(e,d,p,{vocab:!0},s);n.addValue(o,v,p,{propertyIsArray:!0})}for(var h=0;h<p.length;++h){var g=p[h],v=E(e,d,g,{vocab:!0},s),u=n.getContextValue(e,v,"@container"),y=Y(g),x=null;y&&(x=g["@list"]);var m=this.compact(e,v,y?x:g,a);if(y)if(_(m)||(m=[m]),"@list"!==u){var b={};b[E(e,"@list")]=m,m=b,"@index"in g&&(m[E(e,"@index")]=g["@index"])}else if(v in o)throw new It('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError");if("@language"===u||"@index"===u){var w;v in o?w=o[v]:o[v]=w={},"@language"===u&&$(m)&&(m=m["@value"]),n.addValue(w,g[u],m)}else{var j=!a.compactArrays||"@set"===u||"@list"===u||_(m)&&0===m.length||"@list"===d||"@graph"===d;n.addValue(o,v,m,{propertyIsArray:j})}}}else{var u=n.getContextValue(e,t,"@container");if("@index"===u)continue;var C=E(e,d);n.addValue(o,C,p)}else{var O=this.compact(e,"@reverse",p,a);for(var I in O)e.mappings[I]&&e.mappings[I].reverse&&(I in o||a.compactArrays||(o[I]=[]),n.addValue(o,I,O[I]),delete O[I]);if(Object.keys(O).length>0){var C=E(e,d);n.addValue(o,C,O)}}else{var O;if(U(p))O=E(e,p,null,{vocab:"@type"===d});else{O=[];for(var h=0;h<p.length;++h)O.push(E(e,p[h],null,{vocab:!0}))}var C=E(e,d),j=_(O)&&0===p.length;n.addValue(o,C,O,{propertyIsArray:j})}}return o}return r},St.prototype.expand=function(e,t,r,o,l){var u=this;if("undefined"==typeof r)throw new It("Invalid JSON-LD syntax; undefined element.","jsonld.SyntaxError");if(null===r)return null;if(_(r)){var s=[];for(var f in r){var c=u.expand(e,t,r[f],o,l);if(l&&(_(c)||Y(c)))throw new It("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError");null!==c&&(_(c)?s=s.concat(c):s.push(c))}return s}if(J(r)){"@context"in r&&(e=u.processContext(e,r["@context"],o));for(var d=D(e,t,{vocab:!0}),s={},p=Object.keys(r).sort(),v=0;v<p.length;++v){var h,g=p[v],y=r[g];if("@context"!==g){var x=D(e,g,{vocab:!0});if(null!==x&&(Z(x)||A(x))){if(A(x)&&"@reverse"===d)throw new It("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{value:y});if("@id"===x&&!U(y))throw new It('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{value:y});if("@type"===x&&V(y),"@graph"===x&&!J(y)&&!_(y))throw new It('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{value:y});if("@value"===x&&(J(y)||_(y)))throw new It('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{value:y});if("@language"===x){if(!U(y))throw new It('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{value:y});y=y.toLowerCase()}if("@index"===x&&!U(y))throw new It('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{value:y});if("@reverse"!==x){var m=n.getContextValue(e,g,"@container");if("@language"===m&&J(y))h=a(y);else if("@index"===m&&J(y))h=function(t){for(var n=[],r=Object.keys(y).sort(),a=0;a<r.length;++a){var i=r[a],l=y[i];_(l)||(l=[l]),l=u.expand(e,t,l,o,!1);for(var s=0;s<l.length;++s){var f=l[s];"@index"in f||(f["@index"]=i),n.push(f)}}return n}(g);else{var b="@list"===x;if(b||"@set"===x){var w=t;if(b&&"@graph"===d&&(w=null),h=u.expand(e,w,y,o,b),b&&Y(h))throw new It("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError")}else h=u.expand(e,g,y,o,!1)}if(null!==h||"@value"===x)if("@list"===x||Y(h)||"@list"!==m||(h=_(h)?h:[h],h={"@list":h}),e.mappings[g]&&e.mappings[g].reverse){var j=s["@reverse"]={};_(h)||(h=[h]);for(var C=0;C<h.length;++C){var O=h[C];if($(O)||Y(O))throw new It('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{value:h});n.addValue(j,x,O,{propertyIsArray:!0})}}else{var I=-1===["@index","@id","@type","@value","@language"].indexOf(x);n.addValue(s,x,h,{propertyIsArray:I})}}else{if(!J(y))throw new It('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{value:y});if(h=u.expand(e,"@reverse",y,o,l),"@reverse"in h)for(var S in h["@reverse"])n.addValue(s,S,h["@reverse"][S],{propertyIsArray:!0});var j=s["@reverse"]||null;for(var S in h)if("@reverse"!==S){null===j&&(j=s["@reverse"]={}),n.addValue(j,S,[],{propertyIsArray:!0});for(var E=h[S],C=0;C<E.length;++C){var O=E[C];if($(O)||Y(O))throw new It('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{value:h});n.addValue(j,S,O,{propertyIsArray:!0})}}}}}}p=Object.keys(s);var N=p.length;if("@value"in s){if("@type"in s&&"@language"in s)throw new It('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{element:s});var k=N-1;if("@type"in s&&(k-=1),"@index"in s&&(k-=1),"@language"in s&&(k-=1),0!==k)throw new It('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{element:s});null===s["@value"]?s=null:"@language"in s&&!U(s["@value"])&&delete s["@language"]}else if("@type"in s&&!_(s["@type"]))s["@type"]=[s["@type"]];else if("@set"in s||"@list"in s){if(N>1&&2!==N&&"@index"in s)throw new It('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{element:s});"@set"in s&&(s=s["@set"],p=Object.keys(s),N=p.length)}else 1===N&&"@language"in s&&(s=null);if(J(s)&&!o.keepFreeFloatingNodes&&!l&&(null===t||"@graph"===d))if(0===N||"@value"in s)s=null;else{for(var L=!1,R=["@graph","@type"],v=0;!L&&v<p.length;++v)A(p[v])&&-1===R.indexOf(p[v])||(L=!0);L||(s=null)}return s}return l||null!==t&&"@graph"!==D(e,t,{vocab:!0})?i(e,t,r):null},St.prototype.flatten=function(e){var t=new at("_:b"),n={"@default":{}};h(e,n,"@default",t);for(var r=n["@default"],a=Object.keys(n).sort(),o=0;o<a.length;++o){var i=a[o];if("@default"!==i){var l=n[i],u=r[i];u?"@graph"in u||(u["@graph"]=[]):r[i]=u={"@id":i,"@graph":[]};for(var s=u["@graph"],f=Object.keys(l).sort(),c=0;c<f.length;++c){var d=f[c];s.push(l[d])}}}for(var p=[],v=Object.keys(r).sort(),g=0;g<v.length;++g){var y=v[g];p.push(r[y])}return p},St.prototype.frame=function(e,t,n){var r={options:n,graphs:{"@default":{},"@merged":{}}};namer=new at("_:b"),h(e,r.graphs,"@merged",namer),r.subjects=r.graphs["@merged"];var a=[];return g(r,Object.keys(r.subjects).sort(),t,a,null),a},St.prototype.normalize=function(e,t,r){function a(e){function t(l){if(l===e.length)return o(i,a,r);var u=e[l],f=d(u,s,b);f in a?(a[f].push(u),r.push(u)):f in i?(a[f]=[i[f],u],r.push(i[f]),r.push(u),delete i[f]):i[f]=u,n.setImmediate(function(){t(l+1)})}var r=[],a={},i={};n.setImmediate(function(){t(0)})}function o(e,t,n){for(var r=!1,o=Object.keys(e).sort(),l=0;l<o.length;++l){var u=e[o[l]];b.getName(u),r=!0}r?a(n):i(t)}function i(e){function t(a){function o(e,n){if(n===e.length){u.sort(function(e,t){return e=e.hash,t=t.hash,t>e?-1:e>t?1:0});for(var i in u)for(var l in u[i].pathNamer.existing)b.getName(l);return t(a+1)}var f=e[n];if(b.isNamed(f))return o(e,n+1);var c=new at("_:b");c.getName(f),p(f,s,b,c,function(t,a){return t?r(t):(u.push(a),void o(e,n+1))})}if(a===n.length)return l();var i=e[n[a]],u=[];o(i,0)}var n=Object.keys(e).sort();t(0)}function l(){for(var e=[],n=0;n<u.length;++n){for(var a=u[n],o=["subject","object","name"],i=0;i<o.length;++i){var l=o[i];a[l]&&"blank node"===a[l].type&&0!==a[l].value.indexOf("_:c14n")&&(a[l].value=b.getName(a[l].value))}e.push(nt(a,a.name?a.name.value:null))}return e.sort(),t.format?"application/nquads"===t.format?r(null,e.join("")):r(new It("Unknown output format.","jsonld.UnknownFormat",{format:t.format})):void r(null,et(e.join("")))}var u=[],s={};for(var f in e){var c=e[f];"@default"===f&&(f=null);for(var v=0;v<c.length;++v){var h=c[v];null!==f&&(h.name=0===f.indexOf("_:")?{type:"blank node",value:f}:{type:"IRI",value:f}),u.push(h);for(var g=["subject","object","name"],y=0;y<g.length;++y){var x=g[y];if(h[x]&&"blank node"===h[x].type){var m=h[x].value;m in s?s[m].quads.push(h):s[m]={quads:[h]}}}}}var b=new at("_:c14n");return a(Object.keys(s))},St.prototype.fromRDF=function(e,t,r){var a={},o={"@default":a};for(var i in e){var l=e[i];i in o||(o[i]={}),"@default"===i||i in a||(a[i]={"@id":i});for(var u=o[i],s=0;s<l.length;++s){var c=l[s],d=c.subject.value,p=c.predicate.value,v=c.object;d in u||(u[d]={"@id":d});var h=u[d],g="IRI"===v.type||"blank node"===v.type;if(!g||v.value===xt||v.value in u||(u[v.value]={"@id":v.value}),p===mt&&g)n.addValue(h,"@type",v.value,{propertyIsArray:!0});else{var y;if(y=g&&v.value===xt&&p!==yt?{"@list":[]}:f(v,t.useNativeTypes),n.addValue(h,p,y,{propertyIsArray:!0}),"blank node"===v.type&&p!==gt&&p!==yt){var x=u[v.value];x.listHeadFor="listHeadFor"in x?null:y}}}}for(var i in o)for(var m=o[i],b=Object.keys(m),w=0;w<b.length;++w){var j=b[w];if(j in m){var h=m[j];if(J(h.listHeadFor)){for(var y=h.listHeadFor,C=[],O={};j!==xt&&null!==C;){var I=Object.keys(h||{}).length;if(!(J(h)&&0===h["@id"].indexOf("_:")&&(3===I||4===I&&"listHeadFor"in h)&&_(h[gt])&&1===h[gt].length&&_(h[yt])&&1===h[yt].length&&J(h[yt][0])&&"@id"in h[yt][0])||j in O){C=null;break}C.push(h[gt][0]),O[h["@id"]]=!0,j=h[yt][0]["@id"],h=m[j]||null}if(null!==C){delete y["@id"],y["@list"]=C;for(var S in O)delete m[S]}}}}for(var E=[],b=Object.keys(a).sort(),w=0;w<b.length;++w){var j=b[w],h=a[j];if(j in o)for(var l=h["@graph"]=[],m=o[j],N=Object.keys(m).sort(),k=0;k<N.length;++k){var D=m[N[k]];delete D.listHeadFor,l.push(D)}delete h.listHeadFor,E.push(h)}r(null,E)},St.prototype.toRDF=function(e){var t=new at("_:b"),n={"@default":{}};h(e,n,"@default",t);for(var r={},a=Object.keys(n).sort(),o=0;o<a.length;++o){var i=a[o];r[i]=l(n[i],t)}return r},St.prototype.processContext=function(e,t,r){J(t)&&"@context"in t&&_(t["@context"])&&(t=t["@context"]);var a=_(t)?t:[t];if(0===a.length)return e.clone();for(var o=e,i=!0,l=0;l<a.length;++l){var u=a[l];if(null!==u){if(J(u)&&"@context"in u&&(u=u["@context"]),!J(u))throw new It("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{context:u});if(n.cache.activeCtx){var s=n.cache.activeCtx.get(e,u);if(s){o=s,i=!0;continue}}i&&(o=o.clone(),i=!1);var f={};if("@base"in u){var c=u["@base"];if(null===c)c=null;else{if(!U(c))throw new It('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{context:u});if(""!==c&&!Z(c))throw new It('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{context:u})}c=n.url.parse(c||""),o["@base"]=c,f["@base"]=!0}if("@vocab"in u){var d=u["@vocab"];if(null===d)delete o["@vocab"];else{if(!U(d))throw new It('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{context:u});if(!Z(d))throw new It('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{context:u});o["@vocab"]=d}f["@vocab"]=!0}if("@language"in u){var d=u["@language"];if(null===d)delete o["@language"];else{if(!U(d))throw new It('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{context:u});o["@language"]=d.toLowerCase()}f["@language"]=!0}for(var p in u)k(o,u,p,f);n.cache.activeCtx&&n.cache.activeCtx.set(e,u,o)}else o=T(r),i=!1}return o},Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),n.registerRDFParser("application/nquads",et),n.registerRDFParser("rdfa-api",rt),at.prototype.clone=function(){var e=new at(this.prefix);return e.counter=this.counter,e.existing=Q(this.existing),e},at.prototype.getName=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},at.prototype.isNamed=function(e){return e in this.existing},Permutator=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t in e)this.left[e[t]]=!0},Permutator.prototype.hasNext=function(){return!this.done},Permutator.prototype.next=function(){for(var e=this.list.slice(),t=null,n=0,r=this.list.length,a=0;r>a;++a){var o=this.list[a],i=this.left[o];(null===t||o>t)&&(i&&a>0&&o>this.list[a-1]||!i&&r-1>a&&o>this.list[a+1])&&(t=o,n=a)}if(null===t)this.done=!0;else{var l=this.left[t]?n-1:n+1;this.list[n]=this.list[l],this.list[l]=t;for(var a=0;r>a;++a)this.list[a]>t&&(this.left[this.list[a]]=!this.left[this.list[a]])}return e};var Et=n.sha1={};if(e){var Nt=require("crypto");Et.create=function(){var e=Nt.createHash("sha1");return{update:function(t){e.update(t,"utf8")},digest:function(){return e.digest("hex")}}}}else Et.create=function(){return new Et.MessageDigest};if(Et.hash=function(e){var t=Et.create();for(var n in e)t.update(e[n]);return t.digest()},!e){Et.Buffer=function(){this.data="",this.read=0},Et.Buffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},Et.Buffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},Et.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},Et.Buffer.prototype.length=function(){return this.data.length-this.read},Et.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},Et.Buffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);16>n&&(e+="0"),e+=n.toString(16)}return e},Et.MessageDigest=function(){kt.initialized||kt.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new Et.Buffer,this.words=new Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},Et.MessageDigest.prototype.update=function(e){e=unescape(encodeURIComponent(e)),this.messageLength+=e.length,this.input.data+=e,kt.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},Et.MessageDigest.prototype.digest=function(){var e=this.messageLength,t=new Et.Buffer;t.data+=this.input.bytes(),t.data+=kt.padding.substr(0,64-(e+8)%64),t.putInt32(e>>>29&255),t.putInt32(e<<3&4294967295),kt.update(this.state,this.words,t);var n=new Et.Buffer;return n.putInt32(this.state.h0),n.putInt32(this.state.h1),n.putInt32(this.state.h2),n.putInt32(this.state.h3),n.putInt32(this.state.h4),n.toHex()};var kt={padding:null,initialized:!1};kt.init=function(){kt.padding=String.fromCharCode(128);for(var e=String.fromCharCode(0),t=64;t>0;)1&t&&(kt.padding+=e),t>>>=1,t>0&&(e+=e);kt.initialized=!0},kt.update=function(e,t,n){for(var r,a,o,i,l,u,s,f,c=n.length();c>=64;){for(a=e.h0,o=e.h1,i=e.h2,l=e.h3,u=e.h4,f=0;16>f;++f)r=n.getInt32(),t[f]=r,s=l^o&(i^l),r=(a<<5|a>>>27)+s+u+1518500249+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;for(;20>f;++f)r=t[f-3]^t[f-8]^t[f-14]^t[f-16],r=r<<1|r>>>31,t[f]=r,s=l^o&(i^l),r=(a<<5|a>>>27)+s+u+1518500249+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;for(;32>f;++f)r=t[f-3]^t[f-8]^t[f-14]^t[f-16],r=r<<1|r>>>31,t[f]=r,s=o^i^l,r=(a<<5|a>>>27)+s+u+1859775393+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;for(;40>f;++f)r=t[f-6]^t[f-16]^t[f-28]^t[f-32],r=r<<2|r>>>30,t[f]=r,s=o^i^l,r=(a<<5|a>>>27)+s+u+1859775393+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;for(;60>f;++f)r=t[f-6]^t[f-16]^t[f-28]^t[f-32],r=r<<2|r>>>30,t[f]=r,s=o&i|l&(o^i),r=(a<<5|a>>>27)+s+u+2400959708+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;for(;80>f;++f)r=t[f-6]^t[f-16]^t[f-28]^t[f-32],r=r<<2|r>>>30,t[f]=r,s=o^i^l,r=(a<<5|a>>>27)+s+u+3395469782+r,u=l,l=i,i=o<<30|o>>>2,o=a,a=r;e.h0+=a,e.h1+=o,e.h2+=i,e.h3+=l,e.h4+=u,c-=64}}}if(n.url={},e){var Dt=require("url").parse;n.url.parse=function(e){var t=Dt(e);return t.pathname=t.pathname||"",it(t),t.normalizedPath=lt(t.pathname,""!==t.authority),t}}else{var Lt={};Lt.options={key:["href","protocol","host","auth","user","password","hostname","port","relative","path","directory","file","query","hash"],parser:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/},n.url.parse=function(e){for(var t=Lt.options,n=t.parser.exec(e),r={},a=14;a--;)r[t.key[a]]=n[a]||"";return r.host&&""===r.path&&(r.path="/"),r.pathname=r.path||"",it(r),r.normalizedPath=lt(r.pathname,""!==r.authority),r.query&&(r.path=r.path+"?"+r.query),r.protocol&&(r.protocol+=":"),r.hash&&(r.hash="#"+r.hash),r}}return e&&n.useContextLoader("node"),e&&(n.use=function(e){switch(e){case"request":n.request=require("./request");break;default:throw new It("Unknown extension.","jsonld.UnknownExtension",{extension:e})}}),n},r=function(){return n(function(){return r()})};n(r),e?module.exports=r:"function"==typeof define&&define.amd?define("jsonld",[],function(){return r}):t&&("undefined"==typeof jsonld?jsonld=jsonldjs=r:jsonldjs=r)}();