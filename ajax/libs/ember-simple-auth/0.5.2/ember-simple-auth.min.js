!function(a){var b,c;!function(){var a={},d={};b=function(b,c,d){a[b]={deps:c,callback:d}},c=function(b){function m(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(d.hasOwnProperty(b))return d[b];if(d[b]={},!a[b])throw new Error("Could not find module "+b);for(var i,e=a[b],f=e.deps,g=e.callback,h=[],j=0,k=f.length;k>j;j++)"exports"===f[j]?h.push(i={}):h.push(c(m(f[j])));var l=g.apply(this,h);return d[b]=i||l},c.registry=a}(),b("ember-simple-auth",["./ember-simple-auth/core","./ember-simple-auth/session","./ember-simple-auth/authenticators","./ember-simple-auth/authorizers","./ember-simple-auth/stores","./ember-simple-auth/utils","./ember-simple-auth/mixins/application_route_mixin","./ember-simple-auth/mixins/authenticated_route_mixin","./ember-simple-auth/mixins/authentication_controller_mixin","./ember-simple-auth/mixins/login_controller_mixin","exports"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l=a.setup,m=a.initializeExtension,n=a.Configuration,o=b.Session,p=c.Authenticators,q=d.Authorizers,r=e.Stores,s=f.Utils,t=g.ApplicationRouteMixin,u=h.AuthenticatedRouteMixin,v=i.AuthenticationControllerMixin,w=j.LoginControllerMixin;k.setup=l,k.initializeExtension=m,k.Configuration=n,k.Session=o,k.Authenticators=p,k.Authorizers=q,k.Stores=r,k.Utils=s,k.ApplicationRouteMixin=t,k.AuthenticatedRouteMixin=u,k.AuthenticationControllerMixin=v,k.LoginControllerMixin=w}),b("ember-simple-auth/authenticators",["./authenticators/base","exports"],function(a,b){"use strict";var c=a.Base,d={Base:c};b.Authenticators=d}),b("ember-simple-auth/authenticators/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend(c.Evented,{restore:function(){return new c.RSVP.reject},authenticate:function(){return new c.RSVP.reject},invalidate:function(){return new c.RSVP.resolve}});a.Base=d}),b("ember-simple-auth/authorizers",["./authorizers/base","exports"],function(a,b){"use strict";var c=a.Base,d={Base:c};b.Authorizers=d}),b("ember-simple-auth/authorizers/base",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.Object.extend({session:null,authorize:function(){}});a.Base=d}),b("ember-simple-auth/core",["./session","./stores","exports"],function(a,b,c){"use strict";function f(a){if("string"===Ember.typeOf(a)){var b=document.createElement("a");b.href=a,b.href=b.href,a=b}var c=a.port;return Ember.isEmpty(c)&&(c="http:"===a.protocol?"80":"https:"===a.protocol?"443":""),a.protocol+"//"+a.hostname+(""!==c?":"+c:"")}function j(a){var b=g[a]=g[a]||f(a);return i.indexOf(b)>-1||b===h}var i,d=a.Session,e=b.registerStores,g={},h=f(window.location),k=[],l={authenticationRoute:"login",routeAfterAuthentication:"index",sessionPropertyName:"session",applicationRootUrl:null},m=function(a,b,c){b.deferReadiness(),e(a),k.forEach(function(d){d(a,b,c)}),c=c||{},l.routeAfterAuthentication=c.routeAfterAuthentication||l.routeAfterAuthentication,l.authenticationRoute=c.authenticationRoute||l.authenticationRoute,l.sessionPropertyName=c.sessionPropertyName||l.sessionPropertyName,l.applicationRootUrl=a.lookup("router:main").get("rootURL")||"/",i=Ember.A(c.crossOriginWhitelist||[]).map(function(a){return f(a)}),c.storeFactory=c.storeFactory||"ember-simple-auth-session-store:local-storage";var g=a.lookup(c.storeFactory),h=d.create({store:g,container:a});if(a.register("ember-simple-auth-session:main",h,{instantiate:!1}),Ember.A(["controller","route"]).forEach(function(b){a.injection(b,l.sessionPropertyName,"ember-simple-auth-session:main")}),Ember.isEmpty(c.authorizerFactory))Ember.Logger.debug("No authorizer factory was specified for Ember.SimpleAuth - specify one if backend requests need to be authorized.");else{var m=a.lookup(c.authorizerFactory);m&&(m.set("session",h),Ember.$.ajaxPrefilter(function(a,b,c){j(a.url)&&m.authorize(c,a)}),Ember.$(document).ajaxError(function(a,b){401===b.status&&h.trigger("authorizationFailed")}))}var n=function(){b.advanceReadiness()};h.restore().then(n,n)},n=function(a){k.push(a)};c.setup=m,c.initializeExtension=n,c.Configuration=l}),b("ember-simple-auth/mixins/application_route_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({activate:function(){var a=this;d.A(["sessionAuthenticationSucceeded","sessionAuthenticationFailed","sessionInvalidationSucceeded","sessionInvalidationFailed","authorizationFailed"]).forEach(function(b){a.get(e.sessionPropertyName).on(b,function(){Array.prototype.unshift.call(arguments,b),a.send.apply(a,arguments)})})},actions:{authenticateSession:function(){this.transitionTo(e.authenticationRoute)},sessionAuthenticationSucceeded:function(){var a=this.get(e.sessionPropertyName).get("attemptedTransition");a?(a.retry(),this.get(e.sessionPropertyName).set("attemptedTransition",null)):this.transitionTo(e.routeAfterAuthentication)},sessionAuthenticationFailed:function(){},invalidateSession:function(){this.get(e.sessionPropertyName).invalidate()},sessionInvalidationSucceeded:function(){window.location.replace(e.applicationRootUrl)},sessionInvalidationFailed:function(){},authorizationFailed:function(){this.get(e.sessionPropertyName).get("isAuthenticated")&&this.get(e.sessionPropertyName).invalidate()}}});b.ApplicationRouteMixin=f}),b("ember-simple-auth/mixins/authenticated_route_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({beforeModel:function(a){this.get(e.sessionPropertyName).get("isAuthenticated")||(a.abort(),this.get(e.sessionPropertyName).set("attemptedTransition",a),a.send("authenticateSession"))}});b.AuthenticatedRouteMixin=f}),b("ember-simple-auth/mixins/authentication_controller_mixin",["./../core","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Configuration,f=d.Mixin.create({authenticatorFactory:null,actions:{authenticate:function(a){return this.get(e.sessionPropertyName).authenticate(this.get("authenticatorFactory"),a)}}});b.AuthenticationControllerMixin=f}),b("ember-simple-auth/mixins/login_controller_mixin",["./../core","./authentication_controller_mixin","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember;a.Configuration;var g=b.AuthenticationControllerMixin,h=e.Mixin.create(g,{actions:{authenticate:function(){var a=this.getProperties("identification","password");this.set("password",null),this._super(a)}}});c.LoginControllerMixin=h}),b("ember-simple-auth/session",["exports"],function(a){"use strict";var b="undefined"!=typeof window?window:{},c=b.Ember,d=c.ObjectProxy.extend(c.Evented,{authenticatorFactory:null,store:null,isAuthenticated:!1,attemptedTransition:null,content:{},init:function(){this.bindToStoreEvents()},authenticate:function(a,b){c.assert("Session#authenticate requires the authenticator factory to be specified, was "+a,!c.isEmpty(a));var d=this;return new c.RSVP.Promise(function(c,e){d.container.lookup(a).authenticate(b).then(function(b){d.setup(a,b,!0),c()},function(a){d.clear(),d.trigger("sessionAuthenticationFailed",a),e(a)})})},invalidate:function(){var a=this;return new c.RSVP.Promise(function(b,c){var d=a.container.lookup(a.authenticatorFactory);d.invalidate(a.content).then(function(){d.off("sessionDataUpdated"),a.clear(!0),b()},function(b){a.trigger("sessionInvalidationFailed",b),c(b)})})},restore:function(){var a=this;return new c.RSVP.Promise(function(b,c){var d=a.store.restore(),e=d.authenticatorFactory;e?(delete d.authenticatorFactory,a.container.lookup(e).restore(d).then(function(c){a.setup(e,c),b()},function(){a.store.clear(),c()})):(a.store.clear(),c())})},setup:function(a,b,d){d=!!d&&!this.get("isAuthenticated"),this.beginPropertyChanges(),this.setProperties({isAuthenticated:!0,authenticatorFactory:a,content:b}),this.bindToAuthenticatorEvents();var e=c.$.extend({authenticatorFactory:a},this.content);this.store.replace(e),this.endPropertyChanges(),d&&this.trigger("sessionAuthenticationSucceeded")},clear:function(a){a=!!a&&this.get("isAuthenticated"),this.beginPropertyChanges(),this.setProperties({isAuthenticated:!1,authenticatorFactory:null,content:{}}),this.store.clear(),this.endPropertyChanges(),a&&this.trigger("sessionInvalidationSucceeded")},bindToAuthenticatorEvents:function(){var a=this,b=this.container.lookup(this.authenticatorFactory);b.off("sessionDataUpdated"),b.off("sessionDataInvalidated"),b.on("sessionDataUpdated",function(b){a.setup(a.authenticatorFactory,b)}),b.on("sessionDataInvalidated",function(){a.clear(!0)})},bindToStoreEvents:function(){var a=this;this.store.on("sessionDataUpdated",function(b){var c=b.authenticatorFactory;c?(delete b.authenticatorFactory,a.container.lookup(c).restore(b).then(function(b){a.setup(c,b,!0)},function(){a.clear(!0)})):a.clear(!0)})}});a.Session=d}),b("ember-simple-auth/stores",["./stores/base","./stores/local_storage","./stores/ephemeral","exports"],function(a,b,c,d){"use strict";var e=a.Base,f=b.LocalStorage,g=c.Ephemeral,h={Base:e,LocalStorage:f,Ephemeral:g},i=function(a){a.register("ember-simple-auth-session-store:local-storage",f),a.register("ember-simple-auth-session-store:ephemeral",g)};d.registerStores=i,d.Stores=h}),b("ember-simple-auth/stores/base",["../utils/flat_objects_are_equal","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.flatObjectsAreEqual,f=d.Object.extend(d.Evented,{persist:function(){},restore:function(){return{}},replace:function(a){e(a,this.restore())||(this.clear(),this.persist(a))},clear:function(){}});b.Base=f}),b("ember-simple-auth/stores/ephemeral",["./base","exports"],function(a,b){"use strict";var c="undefined"!=typeof window?window:{},d=c.Ember,e=a.Base,f=e.extend({init:function(){this.clear()},persist:function(a){this._data=d.$.extend(a,this._data)},restore:function(){return d.$.extend({},this._data)},clear:function(){delete this._data,this._data={}}});b.Ephemeral=f}),b("ember-simple-auth/stores/local_storage",["./base","../utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d="undefined"!=typeof window?window:{},e=d.Ember,f=a.Base,g=b.flatObjectsAreEqual,h=f.extend({keyPrefix:"ember_simple_auth:",_triggerChangeEventTimeout:null,init:function(){this.bindToStorageEvents()},persist:function(a){for(var b in a){var c=this.buildStorageKey(b);localStorage.setItem(c,a[b])}this._lastData=this.restore()},restore:function(){var a=this,b={};return this.knownKeys().forEach(function(c){var d=c.replace(a.keyPrefix,"");b[d]=localStorage.getItem(c)}),b},clear:function(){this.knownKeys().forEach(function(a){localStorage.removeItem(a)}),this._lastData=null},buildStorageKey:function(a){return this.keyPrefix+a},knownKeys:function(){for(var b=e.A([]),c=0,d=localStorage.length;d>c;c++){var f=localStorage.key(c);0===f.indexOf(this.keyPrefix)&&b.push(f)}return b},bindToStorageEvents:function(){var a=this;e.$(window).bind("storage",function(){var c=a.restore();g(c,a._lastData)||(a._lastData=c,e.run.cancel(a._triggerChangeEventTimeout),a._triggerChangeEventTimeout=e.run.next(a,function(){this.trigger("sessionDataUpdated",c)}))})}});c.LocalStorage=h}),b("ember-simple-auth/utils",["./utils/is_secure_url","./utils/flat_objects_are_equal","exports"],function(a,b,c){"use strict";var d=a.isSecureUrl,e=b.flatObjectsAreEqual,f={isSecureUrl:d,flatObjectsAreEqual:e};c.Utils=f}),b("ember-simple-auth/utils/flat_objects_are_equal",["exports"],function(a){"use strict";var b=function(a,b){function c(a){var b=[];for(var c in a)b.push([c,a[c]]);return b.sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0})}return JSON.stringify(c(a))===JSON.stringify(c(b))};a.flatObjectsAreEqual=b}),b("ember-simple-auth/utils/is_secure_url",["exports"],function(a){"use strict";var b=function(a){var b=document.createElement("a");return b.href=a,b.href=b.href,"https:"==b.protocol};a.isSecureUrl=b}),a.Ember.SimpleAuth=c("ember-simple-auth")}("undefined"!=typeof global?global:window);
