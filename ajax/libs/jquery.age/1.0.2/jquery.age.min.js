(function(){"use strict";var t,s,e=function(t,s){return function(){return t.apply(s,arguments)}};t=jQuery,s=function(){function s(n,i){null==i&&(i={}),this.text=e(this.text,this),this.format=e(this.format,this),this.unit=e(this.unit,this),this.amount=e(this.amount,this),this.formatting=e(this.formatting,this),this.suffix=e(this.suffix,this),this.date=e(this.date,this),this.reformat=e(this.reformat,this),this.$el=n,this.settings=t.extend({},s.settings,i),this.reformat(),setInterval(this.reformat,this.settings.interval)}return s.singular=1,s.settings={interval:1e3,suffixes:{past:"ago",future:"until"},formats:{now:"now",singular:{seconds:"a second",minutes:"a minute",hours:"a hour",days:"a day",weeks:"a week",months:"a month",years:"a year"},plural:{seconds:"{{amount}} seconds",minutes:"{{amount}} minutes",hours:"{{amount}} hours",days:"{{amount}} days",weeks:"{{amount}} weeks",months:"{{amount}} months",years:"{{amount}} years"}}},s.prototype.reformat=function(){return this.$el.html(this.text())},s.prototype.date=function(){var t;return t=this.$el.attr("datetime")||this.$el.attr("date")||this.$el.attr("time"),new Date(t)},s.prototype.suffix=function(t){return 0>t?this.settings.suffixes.past:t>0?this.settings.suffixes.future:void 0},s.prototype.formatting=function(t){return{seconds:Math.round(Math.abs(t/1e3)),minutes:Math.round(Math.abs(t/6e4)),hours:Math.round(Math.abs(t/36e5)),days:Math.round(Math.abs(t/864e5)),weeks:Math.round(Math.abs(t/6048e5)),months:Math.round(Math.abs(t/2592e6)),years:Math.round(Math.abs(t/31536e6))}},s.prototype.amount=function(t){return t.years||t.months||t.weeks||t.days||t.hours||t.minutes||t.seconds||0},s.prototype.unit=function(t){return t.years&&"years"||t.months&&"months"||t.weeks&&"weeks"||t.days&&"days"||t.hours&&"hours"||t.minutes&&"minutes"||t.seconds&&"seconds"||void 0},s.prototype.format=function(t,s){var e;return null!=(e=this.settings.formats[t===this.singular?"singular":"plural"])?e[s]:void 0},s.prototype.text=function(){var t,s,e,n,i,a;return n=this.date()-new Date,i=this.suffix(n),e=this.formatting(n),t=this.amount(e),a=this.unit(e),s=this.format(t,a),s?""+s.replace("{{unit}}",a).replace("{{amount}}",t)+" "+i:this.settings.formats.now},s}(),t.fn.extend({age:function(e){return null==e&&(e={}),this.each(function(){return new s(t(this),e)})}})}).call(this);