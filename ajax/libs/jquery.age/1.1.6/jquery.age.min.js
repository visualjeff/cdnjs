(function(){"use strict";var t,s,e=function(t,s){return function(){return t.apply(s,arguments)}};t=jQuery,s=function(){function s(i,n){null==n&&(n={}),this.text=e(this.text,this),this.interval=e(this.interval,this),this.format=e(this.format,this),this.unit=e(this.unit,this),this.amount=e(this.amount,this),this.formatting=e(this.formatting,this),this.adjust=e(this.adjust,this),this.prefix=e(this.prefix,this),this.suffix=e(this.suffix,this),this.date=e(this.date,this),this.reformat=e(this.reformat,this),this.$el=i,this.settings=t.extend({},s.settings,n),this.reformat()}return s.settings={singular:1,interval:1e3,suffixes:{past:"ago",future:"until"},prefixes:{past:"",future:""},formats:{now:"now",singular:{seconds:"a second",minutes:"a minute",hours:"an hour",days:"a day",weeks:"a week",months:"a month",years:"a year"},plural:{seconds:"{{amount}} seconds",minutes:"{{amount}} minutes",hours:"{{amount}} hours",days:"{{amount}} days",weeks:"{{amount}} weeks",months:"{{amount}} months",years:"{{amount}} years"}}},s.prototype.reformat=function(){var t;return t=this.interval(),this.$el.html(this.text(t)),setTimeout(this.reformat,this.settings.interval)},s.prototype.date=function(){return new Date(this.$el.attr("datetime")||this.$el.attr("date")||this.$el.attr("time"))},s.prototype.suffix=function(t){return 0>t?this.settings.suffixes.past:t>0?this.settings.suffixes.future:void 0},s.prototype.prefix=function(t){return 0>t?this.settings.prefixes.past:t>0?this.settings.prefixes.future:void 0},s.prototype.adjust=function(t,s){return Math.round(Math.abs(t/s))},s.prototype.formatting=function(t){return{seconds:this.adjust(t,1e3),minutes:this.adjust(t,6e4),hours:this.adjust(t,36e5),days:this.adjust(t,864e5),weeks:this.adjust(t,6048e5),months:this.adjust(t,2592e6),years:this.adjust(t,31536e6)}},s.prototype.amount=function(t){return t.years||t.months||t.weeks||t.days||t.hours||t.minutes||t.seconds||0},s.prototype.unit=function(t){return t.years&&"years"||t.months&&"months"||t.weeks&&"weeks"||t.days&&"days"||t.hours&&"hours"||t.minutes&&"minutes"||t.seconds&&"seconds"||void 0},s.prototype.format=function(t,s){var e;return null!=(e=this.settings.formats[t===this.settings.singular?"singular":"plural"])?e[s]:void 0},s.prototype.interval=function(){return this.date()-new Date},s.prototype.text=function(t){var s,e,i,n,r,u;return null==t&&(t=this.interval()),r=this.suffix(t),n=this.prefix(t),i=this.formatting(t),s=this.amount(i),u=this.unit(i),e=this.format(s,u),e?""+n+" "+e.replace("{{unit}}",u).replace("{{amount}}",s)+" "+r:this.settings.formats.now},s}(),t.fn.extend({age:function(e){return null==e&&(e={}),this.each(function(){return new s(t(this),e)})}})}).call(this);