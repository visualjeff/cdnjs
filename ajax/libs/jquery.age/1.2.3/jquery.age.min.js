(function(){"use strict";var t,s,i=function(t,s){return function(){return t.apply(s,arguments)}};t=jQuery,s=function(){function s(e,n){null==n&&(n={}),this.text=i(this.text,this),this.interval=i(this.interval,this),this.format=i(this.format,this),this.unit=i(this.unit,this),this.amount=i(this.amount,this),this.formatting=i(this.formatting,this),this.adjust=i(this.adjust,this),this.prefix=i(this.prefix,this),this.suffix=i(this.suffix,this),this.date=i(this.date,this),this.reformat=i(this.reformat,this),this.$el=e,this.settings=t.extend({},s.settings,n),this.reformat()}return s.settings={singular:1,interval:1e3,suffixes:{past:"ago",future:"until"},prefixes:{past:"",future:""},units:["years","months","weeks","days","hours","minutes","seconds"],formats:{now:"now",singular:{seconds:"a second",minutes:"a minute",hours:"an hour",days:"a day",weeks:"a week",months:"a month",years:"a year"},plural:{seconds:"{{amount}} seconds",minutes:"{{amount}} minutes",hours:"{{amount}} hours",days:"{{amount}} days",weeks:"{{amount}} weeks",months:"{{amount}} months",years:"{{amount}} years"},tiny:{seconds:"{{amount}}s",minutes:"{{amount}}m",hours:"{{amount}}h",days:"{{amount}}d",weeks:"{{amount}}w",months:"{{amount}}m",years:"{{amount}}y"}}},s.prototype.reformat=function(){var t;return t=this.interval(),this.$el.html(this.text(t)),setTimeout(this.reformat,this.settings.interval)},s.prototype.date=function(){return new Date(this.$el.attr("datetime")||this.$el.attr("date")||this.$el.attr("time"))},s.prototype.suffix=function(t){return 0>t?this.settings.suffixes.past:t>0?this.settings.suffixes.future:void 0},s.prototype.prefix=function(t){return 0>t?this.settings.prefixes.past:t>0?this.settings.prefixes.future:void 0},s.prototype.adjust=function(t,s){return Math.floor(Math.abs(t/s))},s.prototype.formatting=function(t){return{seconds:this.adjust(t,1e3),minutes:this.adjust(t,6e4),hours:this.adjust(t,36e5),days:this.adjust(t,864e5),weeks:this.adjust(t,6048e5),months:this.adjust(t,2592e6),years:this.adjust(t,31536e6)}},s.prototype.amount=function(t){return t[this.unit(t)]||0},s.prototype.unit=function(t){var s,i,e,n;for(n=this.settings.units,i=0,e=n.length;e>i;i++)if(s=n[i],t[s]>0)return s;return void 0},s.prototype.format=function(t,s){var i,e;return null!=this.settings.style?null!=(i=this.settings.formats[this.settings.style])?i[s]:void 0:null!=(e=this.settings.formats[t===this.settings.singular?"singular":"plural"])?e[s]:void 0},s.prototype.interval=function(){return this.date()-new Date},s.prototype.text=function(t){var s,i,e,n,r,u;return null==t&&(t=this.interval()),t>0&&null!=this.settings.pending?this.settings.pending:0>t&&null!=this.settings.expired?this.settings.expired:(r=this.suffix(t),n=this.prefix(t),e=this.formatting(t),s=this.amount(e),u=this.unit(e),i=this.format(s,u),i?(""+n+" "+i.replace("{{unit}}",u).replace("{{amount}}",s)+" "+r).trim():this.settings.formats.now)},s}(),t.fn.extend({age:function(i){return null==i&&(i={}),this.each(function(){return new s(t(this),i)})}})}).call(this);