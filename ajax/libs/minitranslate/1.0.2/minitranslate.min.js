/**
 * minitranslate.js
 * http://bryce.io/minitranslate
 * minitranslate.herokuapp.com
 *
 * @version
 * 1.0.2 (July 8 2014)
 *
 * @license
 * The MIT license.
 */
function mt(a,b){var h;if((""!==b.innerHTML||""!==b.value)&&a.length>0&&"mt-ignore"!==b.getAttribute("class"))if(b.children.length>0){var i=b.children;Array.prototype.forEach.call(i,function(b){"mt-ignore"!==b.getAttribute("class")&&(punct_and_text=prepare_punct_and_text(b),iterate_lib(punct_and_text[0],h,a),append_punct(punct_and_text[0],punct_and_text[1]),apply_changes(b,punct_and_text[0]))})}else punct_and_text=prepare_punct_and_text(b),iterate_lib(punct_and_text[0],h,a),append_punct(punct_and_text[0],punct_and_text[1]),apply_changes(b,punct_and_text[0])}function append_punct(a,b){for(i=0;i<b.length;i++)a[b[i].idx]+=b[i].c}function apply_changes(a,b){txt=b.join(" "),"mt-output"===a.id?a.value=txt:a.innerHTML=txt}function prepare_punct_and_text(a){return txt="mt-output"===a.id?a.value:a.innerText,tmp=txt.split(" "),punct=get_punct(tmp),txt=txt.replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g,""),txt_arr=txt.split(" "),[txt_arr,punct]}function iterate_lib(a,b,c){for(i=0;i<c.length;i++)for(j=0;j<a.length;j++)b=detect_capitals(a[j]),a[j].toLowerCase()===c[i].w.toLowerCase()&&(a[j]=apply_capitals(c[i].r,b))}function get_punct(a){var b=[];for(i=0;i<a.length;i++)for(j=0;j<a[i].length;j++)("!"===a[i].charAt(j)||"?"===a[i].charAt(j)||","===a[i].charAt(j)||"."===a[i].charAt(j))&&b.push(new Pun(a[i].charAt(j),i));return b}function detect_capitals(a){for(var b=[],c=0;c<a.length;c++)a.charAt(c)>="A"&&a.charAt(c)<="Z"?b.push(1):b.push(0);return b}function apply_capitals(a,b){for(var c="",d=a.length>=b.length?b.length:a.length,e=0;d>e;e++)c+=b[e]?a.charAt(e).toUpperCase():a.charAt(e).toLowerCase();return a.length>=b.length&&(c+=a.substr(e,a.length-1)),c}function Pun(a,b){this.c=a,this.idx=b}function mt_translate(a){var b=document.querySelectorAll(".mt-translate");Array.prototype.forEach.call(b,function(b){mt(a,b)})}function mt_watch(a){var b=document.getElementById("mt-input"),c=document.getElementById("mt-output"),d=document.getElementById("mt-button");null!==b&&null!==c&&(b.onkeyup=function(){b.getAttribute(!1)||(c.value=b.value,mt(a,c))}),null!==d&&document.getElementById("mt-button").click(function(){c.value=b.value,mt(a,c)})}document.getElementById("mt-input")&&!document.getElementById("mt-output")&&console.log("mt.js: Input detected but no output. Check your input IDs"),!document.getElementById("mt-input")&&document.getElementById("mt-output")&&console.log("mt.js: Output detected but no input. Check your input IDs"),(null!==document.getElementById("mt-input")&&null!==document.getElementById("mt-output")||null!==document.getElementById("mt-button"))&&mt_watch(mt_lib),mt_translate(mt_lib);