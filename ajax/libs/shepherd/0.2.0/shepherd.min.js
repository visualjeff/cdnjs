/*! shepherd.js 0.2.0 */
(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=function(a,b){return function(){return a.apply(b,arguments)}},n={}.hasOwnProperty,o=function(a,b){function c(){this.constructor=a}for(var d in b)n.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};l=Tether.Utils,g=l.extend,j=l.removeClass,e=l.addClass,b=l.Evented,a={top:"top center",left:"middle right",right:"middle left",bottom:"bottom center"},k=function(){var a;return a=0,function(){return a++}}(),f=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.children[0]},h=function(a,b){var c,d,e,f,g;return c=null!=(d=null!=(e=null!=(f=null!=(g=a.matches)?g:a.matchesSelector)?f:a.webkitMatchesSelector)?e:a.mozMatchesSelector)?d:a.oMatchesSelector,c.call(a,b)},i=function(a,b){var c,d,e,f,g,h;if(null==a)return a;if("object"==typeof a)return a;for(f=a.split(" "),f.length>b.length&&(f[0]=f.slice(0,+(f.length-b.length)+1||9e9).join(" "),f.splice(1,f.length-b.length)),d={},c=g=0,h=b.length;h>g;c=++g)e=b[c],d[e]=f[c];return d},d=function(b){function c(a,b){this.shepherd=a,this.destroy=m(this.destroy,this),this.scrollTo=m(this.scrollTo,this),this.complete=m(this.complete,this),this.cancel=m(this.cancel,this),this.hide=m(this.hide,this),this.show=m(this.show,this),this.setOptions(b)}return o(c,b),c.prototype.setOptions=function(a){var b,c,d,e;if(this.options=null!=a?a:{},this.destroy(),this.id=this.options.id||this.id||"step-"+k(),this.options.when){e=this.options.when;for(b in e)c=e[b],this.on(b,c,this)}return null!=(d=this.options).buttons?(d=this.options).buttons:d.buttons=[{text:"Next",action:this.shepherd.next}]},c.prototype.bindAdvance=function(){var a,b,c,d,e=this;return d=i(this.options.advanceOn,["event","selector"]),a=d.event,c=d.selector,b=function(a){if(null!=c){if(h(a.target,c))return e.shepherd.advance()}else if(e.el&&a.target===e.el)return e.shepherd.advance()},document.body.addEventListener(a,b),this.on("destroy",function(){return document.body.removeEventListener(a,b)})},c.prototype.getAttachTo=function(){var a;if(a=i(this.options.attachTo,["element","on"]),null==a&&(a={}),"string"==typeof a.element&&(a.element=document.querySelector(a.element),null==a.element))throw new Error("Shepherd step's attachTo was not found in the page");return a},c.prototype.setupTether=function(){var b,c,d;if("undefined"==typeof Tether||null===Tether)throw new Error("Using the attachment feature of Shepherd requires the Tether library");return c=this.getAttachTo(),b=a[c.on||"right"],null==c.element&&(c.element="viewport",b="middle center"),d={classPrefix:"shepherd",element:this.el,constraints:[{to:"window",pin:!0,attachment:"together"}],target:c.element,offset:c.offset||"0 0",attachment:b},this.tether=new Tether(g(d,this.options.tetherOptions))},c.prototype.show=function(){var a,b=this;return null==this.el&&this.render(),e(this.el,"shepherd-open"),null!=(a=this.tether)&&a.enable(),this.options.scrollTo&&setTimeout(function(){return b.scrollTo()}),this.trigger("show")},c.prototype.hide=function(){var a;return j(this.el,"shepherd-open"),null!=(a=this.tether)&&a.disable(),this.trigger("hide")},c.prototype.cancel=function(){return this.hide(),this.trigger("cancel")},c.prototype.complete=function(){return this.hide(),this.trigger("complete")},c.prototype.scrollTo=function(){var a,b,c,d,e,f,g,h,i,j;return e=this.getAttachTo().element,null!=e?(a=jQuery(e),j=a.offset(),i=j.top,g=j.left,f=a.outerHeight(),h=$(this.el).offset(),d=h.top,c=h.left,b=$(this.el).outerHeight(),pageYOffset>i||pageYOffset>d?jQuery(document.body).scrollTop(Math.min(i,d)-10):i+f>pageYOffset+innerHeight||d+b>pageYOffset+innerHeight?jQuery(document.body).scrollTop(Math.max(i+f,d+b)-innerHeight+10):void 0):void 0},c.prototype.destroy=function(){var a;return null!=this.el&&(document.body.removeChild(this.el),delete this.el),null!=(a=this.tether)&&a.destroy(),this.trigger("destroy")},c.prototype.render=function(){var a,b,c,d,e,g,h,i,j,k,l,m,n,o,p,q;if(null!=this.el&&this.destroy(),this.el=f("<div class='shepherd-step "+(null!=(o=this.options.classes)?o:"")+"' data-id='"+this.id+"'></div>"),d=document.createElement("div"),d.className="shepherd-content",this.el.appendChild(d),null!=this.options.title&&(g=document.createElement("header"),g.innerHTML="<h3 class='shepherd-title'>"+this.options.title+"</h3>",this.el.className+=" shepherd-has-title",d.appendChild(g)),null!=this.options.text){for(j=f("<div class='shepherd-text'></div>"),i=this.options.text,"string"==typeof i&&(i=[i]),k=0,m=i.length;m>k;k++)h=i[k],j.innerHTML+="<p>"+h+"</p>";d.appendChild(j)}if(e=document.createElement("footer"),this.options.buttons){for(b=f("<ul class='shepherd-buttons'></ul>"),p=this.options.buttons,l=0,n=p.length;n>l;l++)c=p[l],a=f("<li><a class='shepherd-button "+(null!=(q=c.classes)?q:"")+"'>"+c.text+"</a>"),b.appendChild(a),this.bindButtonEvents(c,a.querySelector("a"));e.appendChild(b)}return d.appendChild(e),document.body.appendChild(this.el),this.setupTether(),this.options.advanceOn?this.bindAdvance():void 0},c.prototype.bindButtonEvents=function(a,b){var c,d,e,f,g=this;null==a.events&&(a.events={}),null!=a.action&&(a.events.click=a.action),f=a.events;for(c in f)d=f[c],"string"==typeof d&&(e=d,d=function(){return g.shepherd.show(e)}),b.addEventListener(c,d);return this.on("destroy",function(){var e,f;e=a.events,f=[];for(c in e)d=e[c],f.push(b.removeEventListener(c,d));return f})},c}(b),c=function(a){function b(a){var b;this.options=null!=a?a:{},this.hide=m(this.hide,this),this.cancel=m(this.cancel,this),this.back=m(this.back,this),this.next=m(this.next,this),this.steps=null!=(b=this.options.steps)?b:[]}return o(b,a),b.prototype.addStep=function(a,b){return null==b?b=a:b.id=a,b=g({},this.options.defaults,b),this.steps.push(new d(this,b))},b.prototype.getById=function(a){var b,c,d,e;for(e=this.steps,c=0,d=e.length;d>c;c++)if(b=e[c],b.id===a)return b},b.prototype.next=function(){var a;return a=this.steps.indexOf(this.currentStep),a===this.steps.length-1?(this.hide(a),this.trigger("complete")):this.show(a+1)},b.prototype.back=function(){var a;return a=this.steps.indexOf(this.currentStep),this.show(a-1)},b.prototype.cancel=function(){var a;return null!=(a=this.currentStep)&&a.cancel(),this.trigger("cancel")},b.prototype.hide=function(){var a;return null!=(a=this.currentStep)&&a.hide(),this.trigger("hide")},b.prototype.show=function(a){var b;return null==a&&(a=0),this.currentStep&&this.currentStep.hide(),b="string"==typeof a?this.getById(a):this.steps[a],b?(this.trigger("shown",{step:b,previous:this.currentStep}),this.currentStep=b,b.show()):void 0},b.prototype.start=function(){return this.currentStep=null,this.next()},b}(b),window.Shepherd=c}).call(this);